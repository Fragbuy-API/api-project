Testing Warehouse APIs...

Running putaway_test.py...
[94m================= TESTING PUTAWAY WORKFLOW =================[0m

[94m======== Testing: API Health Check ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "healthy",
  "message": "API is running and database is connected",
  "database": "connected",
  "timestamp": "2025-06-06T01:00:02.846074",
  "monitoring": {
    "error_rates_1h": {
      "total_requests": 2,
      "error_count": 0,
      "server_error_count": 0,
      "client_error_count": 0,
      "error_rate_percent": 0.0,
      "avg_response_time_ms": 22.0,
      "max_response_time_ms": 25
    },
    "endpoint_performance_24h": {
      "endpoints": [
        {
          "endpoint": "/api/v1/health",
          "request_count": 1,
          "avg_response_time_ms": 25.0,
          "max_response_time_ms": 25,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/monitoring/system-status",
          "request_count": 1,
          "avg_response_time_ms": 19.0,
          "max_response_time_ms": 19,
          "error_count": 0,
          "error_rate_percent": 0.0
        }
      ]
    },
    "recent_errors": {
      "recent_errors": []
    }
  }
}[0m

[94m======== Testing: Normal Putaway Order Creation ========[0m
Using tote ID: TOTECQ815
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Putaway order created successfully for tote TOTECQ815",
  "order_id": 2032,
  "timestamp": "2025-06-06T01:00:02.948164",
  "items_processed": 2,
  "total_quantity": 8
}[0m

[94m======== Testing: Putaway Order with Insufficient Stock ========[0m
Using tote ID: TOTEKZWCC with insufficient stock flag
[92mâœ“ PASS: Request failed as expected with status 400[0m
[93m{
  "detail": {
    "status": "error",
    "message": "Insufficient stock to fulfill this putaway order",
    "timestamp": "2025-06-06T01:00:02.974667",
    "error_code": "INSUFFICIENT_STOCK"
  }
}[0m

[94m======== Testing: Duplicate Tote ID ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Putaway order created successfully for tote TOTELK65D",
  "order_id": 2033,
  "timestamp": "2025-06-06T01:00:03.226816",
  "items_processed": 2,
  "total_quantity": 8
}[0m
Using duplicate tote ID: TOTELK65D
[92mâœ“ PASS: Request failed as expected with status 400[0m
[93m{
  "detail": {
    "status": "error",
    "message": "Tote TOTELK65D already exists in the system",
    "timestamp": "2025-06-06T01:00:03.305813",
    "error_code": "DUPLICATE_TOTE"
  }
}[0m

[94m======== Testing: Invalid Tote Format ========[0m
[92mâœ“ PASS: Request failed as expected with status 422[0m
[93m{
  "detail": [
    {
      "type": "value_error",
      "loc": [
        "body",
        "tote"
      ],
      "msg": "Value error, Tote must start with TOTE followed by up to 15 alphanumeric characters or hyphens",
      "input": "INVALID-TOTE",
      "ctx": {
        "error": {
          "error_code": "TOTE_INVALID_FORMAT"
        }
      }
    }
  ]
}[0m

[94m======== Testing: Invalid Barcode ========[0m
[92mâœ“ PASS: Request failed as expected with status 422[0m
[93m{
  "detail": [
    {
      "type": "value_error",
      "loc": [
        "body",
        "items",
        0,
        "barcode"
      ],
      "msg": "Value error, Barcode must be between 8 and 14 digits or \"NA\" for not available",
      "input": "123",
      "ctx": {
        "error": {
          "error_code": "BARCODE_INVALID_FORMAT"
        }
      }
    }
  ]
}[0m

[94m================= TEST SUMMARY =================[0m
API health check: âœ“
Normal putaway order: âœ“
Insufficient stock test: âœ“
Duplicate tote rejection: âœ“
Invalid tote format rejection: âœ“
Invalid barcode rejection: âœ“
[92mâœ“ All tests passed! Putaway workflow is working correctly.[0m
Running bulk_storage_test.py...
[94m================= TESTING BULK STORAGE WORKFLOW =================[0m

[94m======== Testing: API Health Check ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "degraded",
  "message": "API is running and database is connected",
  "database": "connected",
  "timestamp": "2025-06-06T01:00:04.413788",
  "monitoring": {
    "error_rates_1h": {
      "total_requests": 9,
      "error_count": 4,
      "server_error_count": 0,
      "client_error_count": 4,
      "error_rate_percent": 44.44,
      "avg_response_time_ms": 39.44,
      "max_response_time_ms": 126
    },
    "endpoint_performance_24h": {
      "endpoints": [
        {
          "endpoint": "/api/v1/putawayOrder",
          "request_count": 6,
          "avg_response_time_ms": 43.33,
          "max_response_time_ms": 126,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/health",
          "request_count": 2,
          "avg_response_time_ms": 38.0,
          "max_response_time_ms": 51,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/monitoring/system-status",
          "request_count": 1,
          "avg_response_time_ms": 19.0,
          "max_response_time_ms": 19,
          "error_count": 0,
          "error_rate_percent": 0.0
        }
      ]
    },
    "recent_errors": {
      "recent_errors": [
        {
          "timestamp": "2025-06-06T01:00:03",
          "endpoint": "/api/v1/putawayOrder",
          "method": "POST",
          "status_code": 400,
          "error_message": null,
          "request_id": "1bbb1ff6-7114-4829-9873-ff93cbc4cb0f",
          "response_time_ms": 28
        },
        {
          "timestamp": "2025-06-06T01:00:03",
          "endpoint": "/api/v1/putawayOrder",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "ddea1e5d-5a25-43cb-a9d0-f05d1c580c8d",
          "response_time_ms": 2
        },
        {
          "timestamp": "2025-06-06T01:00:03",
          "endpoint": "/api/v1/putawayOrder",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "74b1a324-f6ad-41ea-b9d4-a251f86632dd",
          "response_time_ms": 2
        },
        {
          "timestamp": "2025-06-06T01:00:02",
          "endpoint": "/api/v1/putawayOrder",
          "method": "POST",
          "status_code": 400,
          "error_message": null,
          "request_id": "f0563f84-0804-4591-91f2-d1bd680091a5",
          "response_time_ms": 15
        }
      ]
    }
  },
  "health_issues": [
    "High error rate: 44.44%"
  ]
}[0m

[94m======== Testing: Normal Bulk Storage Order Creation ========[0m
Using location: RACK-U5-64
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Bulk storage order created successfully for location RACK-U5-64",
  "order_id": 1467,
  "timestamp": "2025-06-06T01:00:04.486154",
  "items_processed": 2,
  "total_quantity": 75
}[0m

[94m======== Testing: Bulk Storage Order with Insufficient Stock ========[0m
Using location: RACK-V7-48 with insufficient stock flag
[92mâœ“ PASS: Request failed as expected with status 400[0m
[93m{
  "detail": {
    "status": "error",
    "message": "Insufficient stock to fulfill this bulk storage order",
    "timestamp": "2025-06-06T01:00:04.594512",
    "error_code": "INSUFFICIENT_STOCK"
  }
}[0m

[94m======== Testing: Duplicate Location ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Bulk storage order created successfully for location RACK-X4-64",
  "order_id": 1468,
  "timestamp": "2025-06-06T01:00:04.681447",
  "items_processed": 2,
  "total_quantity": 75
}[0m
Using duplicate location: RACK-X4-64
[92mâœ“ PASS: Request failed as expected with status 400[0m
[93m{
  "detail": {
    "status": "error",
    "message": "Location RACK-X4-64 already has a pending order",
    "timestamp": "2025-06-06T01:00:04.754891",
    "error_code": "DUPLICATE_LOCATION"
  }
}[0m

[94m======== Testing: Invalid Location Format ========[0m
[92mâœ“ PASS: Request failed as expected with status 400[0m
[93m{
  "detail": {
    "status": "error",
    "message": "Location INVALID-LOCATION already has a pending order",
    "timestamp": "2025-06-06T01:00:04.803498",
    "error_code": "DUPLICATE_LOCATION"
  }
}[0m

[94m======== Testing: Invalid Barcode ========[0m
[92mâœ“ PASS: Request failed as expected with status 422[0m
[93m{
  "detail": [
    {
      "type": "value_error",
      "loc": [
        "body",
        "items",
        0,
        "barcode"
      ],
      "msg": "Value error, Barcode must be between 8 and 14 digits or \"NA\" for not available",
      "input": "123",
      "ctx": {
        "error": {
          "error_code": "BARCODE_INVALID_FORMAT"
        }
      }
    }
  ]
}[0m

[94m================= TEST SUMMARY =================[0m
API health check: âœ“
Normal bulk storage order: âœ“
Insufficient stock test: âœ“
Duplicate location rejection: âœ“
Invalid location format rejection: âœ“
Invalid barcode rejection: âœ“
[92mâœ“ All tests passed! Bulk storage workflow is working correctly.[0m
Running test_warehouse_locations.py...
[94m================= TESTING WAREHOUSE LOCATIONS API =================[0m

[94m======== Testing: API Health Check ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "degraded",
  "message": "API is running and database is connected",
  "database": "connected",
  "timestamp": "2025-06-06T01:00:05.734350",
  "monitoring": {
    "error_rates_1h": {
      "total_requests": 16,
      "error_count": 8,
      "server_error_count": 0,
      "client_error_count": 8,
      "error_rate_percent": 50.0,
      "avg_response_time_ms": 46.94,
      "max_response_time_ms": 152
    },
    "endpoint_performance_24h": {
      "endpoints": [
        {
          "endpoint": "/api/v1/bulkStorage",
          "request_count": 6,
          "avg_response_time_ms": 40.67,
          "max_response_time_ms": 70,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/putawayOrder",
          "request_count": 6,
          "avg_response_time_ms": 43.33,
          "max_response_time_ms": 126,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/health",
          "request_count": 3,
          "avg_response_time_ms": 76.0,
          "max_response_time_ms": 152,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/monitoring/system-status",
          "request_count": 1,
          "avg_response_time_ms": 19.0,
          "max_response_time_ms": 19,
          "error_count": 0,
          "error_rate_percent": 0.0
        }
      ]
    },
    "recent_errors": {
      "recent_errors": [
        {
          "timestamp": "2025-06-06T01:00:04",
          "endpoint": "/api/v1/bulkStorage",
          "method": "POST",
          "status_code": 400,
          "error_message": null,
          "request_id": "a7ab528a-2dee-41f4-9761-a64967196b8d",
          "response_time_ms": 61
        },
        {
          "timestamp": "2025-06-06T01:00:04",
          "endpoint": "/api/v1/bulkStorage",
          "method": "POST",
          "status_code": 400,
          "error_message": null,
          "request_id": "3a794a92-b8c6-4db8-a24d-49837c353eda",
          "response_time_ms": 35
        },
        {
          "timestamp": "2025-06-06T01:00:04",
          "endpoint": "/api/v1/bulkStorage",
          "method": "POST",
          "status_code": 400,
          "error_message": null,
          "request_id": "28db9c27-0136-4072-9bf6-f381a65c8c23",
          "response_time_ms": 12
        },
        {
          "timestamp": "2025-06-06T01:00:04",
          "endpoint": "/api/v1/bulkStorage",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "58f6b4e2-333c-4f91-ae15-4b753d9ea5a0",
          "response_time_ms": 11
        },
        {
          "timestamp": "2025-06-06T01:00:03",
          "endpoint": "/api/v1/putawayOrder",
          "method": "POST",
          "status_code": 400,
          "error_message": null,
          "request_id": "1bbb1ff6-7114-4829-9873-ff93cbc4cb0f",
          "response_time_ms": 28
        }
      ]
    }
  },
  "health_issues": [
    "High error rate: 50.00%"
  ]
}[0m

[94m======== Testing: Warehouse Locations API Health Check ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "healthy",
  "message": "Warehouse locations API endpoint is available",
  "timestamp": "2025-06-06T01:00:05.770110"
}[0m

[94m======== Testing: Get All Warehouse Locations ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Found 8 warehouse locations",
  "count": 8,
  "locations": [
    {
      "warehouse": "AGP23",
      "location_code": "GENERAL",
      "location_name": "General"
    },
    {
      "warehouse": "AGP23",
      "location_code": "PRESOLDRESERVE",
      "location_name": "Presold Reserve"
    },
    {
      "warehouse": "DON",
      "location_code": "1HAI",
      "location_name": "HAI"
    },
    {
      "warehouse": "DON",
      "location_code": "2STORAGE",
      "location_name": "Storage"
    },
    {
      "warehouse": "DON",
      "location_code": "3SHOWROOM",
      "location_name": "Showroom"
    },
    {
      "warehouse": "DON",
      "location_code": "4STAGING",
      "location_name": "Staging"
    },
    {
      "warehouse": "DON",
      "location_code": "5RESERVE",
      "location_name": "Reserve"
    },
    {
      "warehouse": "DUBAI",
      "location_code": "TEMP",
      "location_name": "Temporary"
    }
  ],
  "timestamp": "2025-06-06T01:00:05.811890"
}[0m

[94m======== Testing: Filter Locations by Warehouse ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Found 5 warehouse locations",
  "count": 5,
  "locations": [
    {
      "warehouse": "DON",
      "location_code": "1HAI",
      "location_name": "HAI"
    },
    {
      "warehouse": "DON",
      "location_code": "2STORAGE",
      "location_name": "Storage"
    },
    {
      "warehouse": "DON",
      "location_code": "3SHOWROOM",
      "location_name": "Showroom"
    },
    {
      "warehouse": "DON",
      "location_code": "4STAGING",
      "location_name": "Staging"
    },
    {
      "warehouse": "DON",
      "location_code": "5RESERVE",
      "location_name": "Reserve"
    }
  ],
  "timestamp": "2025-06-06T01:00:05.836011"
}[0m

[94m================= TEST SUMMARY =================[0m
Tests passed: 2/2
[92mâœ“ All tests passed! Warehouse Locations API is working.[0m
Running test_art_orders.py...
[94m================= TESTING ART ORDERS API =================[0m

[94m======== Testing: API Health Check ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "degraded",
  "message": "API is running and database is connected",
  "database": "connected",
  "timestamp": "2025-06-06T01:00:06.469254",
  "monitoring": {
    "error_rates_1h": {
      "total_requests": 20,
      "error_count": 8,
      "server_error_count": 0,
      "client_error_count": 8,
      "error_rate_percent": 40.0,
      "avg_response_time_ms": 40.85,
      "max_response_time_ms": 152
    },
    "endpoint_performance_24h": {
      "endpoints": [
        {
          "endpoint": "/api/v1/bulkStorage",
          "request_count": 6,
          "avg_response_time_ms": 40.67,
          "max_response_time_ms": 70,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/putawayOrder",
          "request_count": 6,
          "avg_response_time_ms": 43.33,
          "max_response_time_ms": 126,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/health",
          "request_count": 4,
          "avg_response_time_ms": 65.25,
          "max_response_time_ms": 152,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/warehouse_locations",
          "request_count": 2,
          "avg_response_time_ms": 16.0,
          "max_response_time_ms": 22,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/monitoring/system-status",
          "request_count": 1,
          "avg_response_time_ms": 19.0,
          "max_response_time_ms": 19,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/warehouse-locations-health",
          "request_count": 1,
          "avg_response_time_ms": 1.0,
          "max_response_time_ms": 1,
          "error_count": 0,
          "error_rate_percent": 0.0
        }
      ]
    },
    "recent_errors": {
      "recent_errors": [
        {
          "timestamp": "2025-06-06T01:00:04",
          "endpoint": "/api/v1/bulkStorage",
          "method": "POST",
          "status_code": 400,
          "error_message": null,
          "request_id": "a7ab528a-2dee-41f4-9761-a64967196b8d",
          "response_time_ms": 61
        },
        {
          "timestamp": "2025-06-06T01:00:04",
          "endpoint": "/api/v1/bulkStorage",
          "method": "POST",
          "status_code": 400,
          "error_message": null,
          "request_id": "3a794a92-b8c6-4db8-a24d-49837c353eda",
          "response_time_ms": 35
        },
        {
          "timestamp": "2025-06-06T01:00:04",
          "endpoint": "/api/v1/bulkStorage",
          "method": "POST",
          "status_code": 400,
          "error_message": null,
          "request_id": "28db9c27-0136-4072-9bf6-f381a65c8c23",
          "response_time_ms": 12
        },
        {
          "timestamp": "2025-06-06T01:00:04",
          "endpoint": "/api/v1/bulkStorage",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "58f6b4e2-333c-4f91-ae15-4b753d9ea5a0",
          "response_time_ms": 11
        },
        {
          "timestamp": "2025-06-06T01:00:03",
          "endpoint": "/api/v1/putawayOrder",
          "method": "POST",
          "status_code": 400,
          "error_message": null,
          "request_id": "1bbb1ff6-7114-4829-9873-ff93cbc4cb0f",
          "response_time_ms": 28
        }
      ]
    }
  },
  "health_issues": [
    "High error rate: 40.00%"
  ]
}[0m

[94m======== Testing: ART Orders API Health Check ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "healthy",
  "message": "ART Orders API endpoints are available",
  "timestamp": "2025-06-06T01:00:06.493132"
}[0m

[94m======== Testing: Add Operation ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Successfully added 50 units of SKU 4711M-50B to location 3SHOWROOM",
  "operation_type": "Add",
  "sku": "4711M-50B",
  "quantity": 50,
  "timestamp": "2025-06-06T01:00:06.531045",
  "to_location": "3SHOWROOM",
  "reason": "Restocking",
  "operation_id": 7471
}[0m

[94m======== Testing: Remove Operation ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Successfully removed 20 units of SKU 4711M-50B from location 1HAI",
  "operation_type": "Remove",
  "sku": "4711M-50B",
  "quantity": 20,
  "timestamp": "2025-06-06T01:00:06.580671",
  "from_location": "1HAI",
  "reason": "Damaged goods",
  "operation_id": 7472
}[0m

[94m======== Testing: Transfer Operation ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Successfully transferred 30 units of SKU 4711M-50B from location 1HAI to location 3SHOWROOM",
  "operation_type": "Transfer",
  "sku": "4711M-50B",
  "quantity": 30,
  "timestamp": "2025-06-06T01:00:06.617730",
  "from_location": "1HAI",
  "to_location": "3SHOWROOM",
  "reason": "Reorganizing inventory",
  "operation_id": 7473
}[0m

[94m======== Testing: Using qty instead of quantity ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Successfully added 25 units of SKU 4711M-50B to location 3SHOWROOM",
  "operation_type": "Add",
  "sku": "4711M-50B",
  "quantity": 25,
  "timestamp": "2025-06-06T01:00:06.642560",
  "to_location": "3SHOWROOM",
  "reason": "Testing qty field",
  "operation_id": 7474
}[0m

[94m======== Testing: Empty from_location String ========[0m
[92mâœ“ PASS: Request failed as expected with status 422[0m
[93m{
  "detail": [
    {
      "type": "value_error",
      "loc": [
        "body"
      ],
      "msg": "Value error, from_location is required for Remove operations",
      "input": {
        "type": "Remove",
        "sku": "4711M-50B",
        "quantity": 20,
        "from_location": "",
        "reason": "This should fail"
      },
      "ctx": {
        "error": {
          "error_code": "FROM_LOCATION_REQUIRED"
        }
      }
    }
  ]
}[0m

[94m======== Testing: Whitespace to_location String ========[0m
[92mâœ“ PASS: Request failed as expected with status 422[0m
[93m{
  "detail": [
    {
      "type": "value_error",
      "loc": [
        "body"
      ],
      "msg": "Value error, to_location is required for Add operations",
      "input": {
        "type": "Add",
        "sku": "4711M-50B",
        "quantity": 50,
        "to_location": "   ",
        "reason": "This should fail"
      },
      "ctx": {
        "error": {
          "error_code": "TO_LOCATION_REQUIRED"
        }
      }
    }
  ]
}[0m

[94m======== Testing: Various Valid Location Formats ========[0m

Testing location format: 3SHOWROOM
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Successfully added 10 units of SKU 4711M-50B to location 3SHOWROOM",
  "operation_type": "Add",
  "sku": "4711M-50B",
  "quantity": 10,
  "timestamp": "2025-06-06T01:00:06.703215",
  "to_location": "3SHOWROOM",
  "reason": "Testing location format: 3SHOWROOM",
  "operation_id": 7475
}[0m

Testing location format: RACK-A1-01
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Successfully added 10 units of SKU 4711M-50B to location RACK-A1-01",
  "operation_type": "Add",
  "sku": "4711M-50B",
  "quantity": 10,
  "timestamp": "2025-06-06T01:00:06.725881",
  "to_location": "RACK-A1-01",
  "reason": "Testing location format: RACK-A1-01",
  "operation_id": 7476
}[0m

Testing location format: DOCK
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Successfully added 10 units of SKU 4711M-50B to location DOCK",
  "operation_type": "Add",
  "sku": "4711M-50B",
  "quantity": 10,
  "timestamp": "2025-06-06T01:00:06.744759",
  "to_location": "DOCK",
  "reason": "Testing location format: DOCK",
  "operation_id": 7477
}[0m

Testing location format: WAREHOUSE-123
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Successfully added 10 units of SKU 4711M-50B to location WAREHOUSE-123",
  "operation_type": "Add",
  "sku": "4711M-50B",
  "quantity": 10,
  "timestamp": "2025-06-06T01:00:06.767539",
  "to_location": "WAREHOUSE-123",
  "reason": "Testing location format: WAREHOUSE-123",
  "operation_id": 7478
}[0m

Testing location format: Floor_1_Zone_B
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Successfully added 10 units of SKU 4711M-50B to location FLOOR_1_ZONE_B",
  "operation_type": "Add",
  "sku": "4711M-50B",
  "quantity": 10,
  "timestamp": "2025-06-06T01:00:06.788452",
  "to_location": "FLOOR_1_ZONE_B",
  "reason": "Testing location format: Floor_1_Zone_B",
  "operation_id": 7479
}[0m

Testing location format: 12345
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Successfully added 10 units of SKU 4711M-50B to location 12345",
  "operation_type": "Add",
  "sku": "4711M-50B",
  "quantity": 10,
  "timestamp": "2025-06-06T01:00:06.832870",
  "to_location": "12345",
  "reason": "Testing location format: 12345",
  "operation_id": 7480
}[0m
[92mâœ“ PASS: All location formats test[0m

[94m======== Testing: Insufficient Stock (Simulated) ========[0m
[92mâœ“ PASS: Request failed as expected with status 400[0m
[93m{
  "detail": {
    "status": "error",
    "message": "Insufficient stock of SKU 4711M-50B at location 1HAI",
    "timestamp": "2025-06-06T01:00:06.852778",
    "error_code": "INSUFFICIENT_STOCK"
  }
}[0m

[94m======== Testing: Invalid SKU ========[0m
[92mâœ“ PASS: Request failed as expected with status 500[0m
[93m{
  "detail": {
    "status": "error",
    "message": "Server error occurred during ART order processing",
    "timestamp": "2025-06-06T01:00:06.866550",
    "error_code": "SERVER_ERROR"
  }
}[0m

[94m======== Testing: Missing from_location in Remove Operation ========[0m
[92mâœ“ PASS: Request failed as expected with status 422[0m
[93m{
  "detail": [
    {
      "type": "value_error",
      "loc": [
        "body"
      ],
      "msg": "Value error, from_location is required for Remove operations",
      "input": {
        "type": "Remove",
        "sku": "4711M-50B",
        "quantity": 20
      },
      "ctx": {
        "error": {
          "error_code": "FROM_LOCATION_REQUIRED"
        }
      }
    }
  ]
}[0m

[94m======== Testing: Missing to_location in Add Operation ========[0m
[92mâœ“ PASS: Request failed as expected with status 422[0m
[93m{
  "detail": [
    {
      "type": "value_error",
      "loc": [
        "body"
      ],
      "msg": "Value error, to_location is required for Add operations",
      "input": {
        "type": "Add",
        "sku": "4711M-50B",
        "quantity": 50
      },
      "ctx": {
        "error": {
          "error_code": "TO_LOCATION_REQUIRED"
        }
      }
    }
  ]
}[0m

[94m======== Testing: Same Locations for Transfer ========[0m
[92mâœ“ PASS: Request failed as expected with status 422[0m
[93m{
  "detail": [
    {
      "type": "value_error",
      "loc": [
        "body"
      ],
      "msg": "Value error, from_location and to_location cannot be the same for Transfer operations",
      "input": {
        "type": "Transfer",
        "sku": "4711M-50B",
        "quantity": 30,
        "from_location": "3SHOWROOM",
        "to_location": "3SHOWROOM",
        "reason": "This should fail"
      },
      "ctx": {
        "error": {
          "error_code": "LOCATIONS_SAME_FOR_TRANSFER"
        }
      }
    }
  ]
}[0m

[94m================= TEST SUMMARY =================[0m
Tests passed: 12/12
[92mâœ“ All tests passed! ART Orders API is working.[0m
Testing Orders APIs...

Running test_purchase_orders.py...
[94m================= TESTING ENHANCED PURCHASE ORDER SEARCH API =================[0m

[94m======== Testing: API Health Check ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "degraded",
  "message": "API is running and database is connected",
  "database": "connected",
  "timestamp": "2025-06-06T01:00:07.275828",
  "monitoring": {
    "error_rates_1h": {
      "total_requests": 39,
      "error_count": 15,
      "server_error_count": 1,
      "client_error_count": 14,
      "error_rate_percent": 38.46,
      "avg_response_time_ms": 26.46,
      "max_response_time_ms": 152
    },
    "endpoint_performance_24h": {
      "endpoints": [
        {
          "endpoint": "/api/v1/art_order",
          "request_count": 17,
          "avg_response_time_ms": 9.41,
          "max_response_time_ms": 28,
          "error_count": 7,
          "error_rate_percent": 41.18
        },
        {
          "endpoint": "/api/v1/bulkStorage",
          "request_count": 6,
          "avg_response_time_ms": 40.67,
          "max_response_time_ms": 70,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/putawayOrder",
          "request_count": 6,
          "avg_response_time_ms": 43.33,
          "max_response_time_ms": 126,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/health",
          "request_count": 5,
          "avg_response_time_ms": 63.0,
          "max_response_time_ms": 152,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/warehouse_locations",
          "request_count": 2,
          "avg_response_time_ms": 16.0,
          "max_response_time_ms": 22,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/monitoring/system-status",
          "request_count": 1,
          "avg_response_time_ms": 19.0,
          "max_response_time_ms": 19,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/art-orders-health",
          "request_count": 1,
          "avg_response_time_ms": 1.0,
          "max_response_time_ms": 1,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/warehouse-locations-health",
          "request_count": 1,
          "avg_response_time_ms": 1.0,
          "max_response_time_ms": 1,
          "error_count": 0,
          "error_rate_percent": 0.0
        }
      ]
    },
    "recent_errors": {
      "recent_errors": [
        {
          "timestamp": "2025-06-06T01:00:06",
          "endpoint": "/api/v1/art_order",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "0127fa9f-cea5-486f-9b58-c8ce9fc18151",
          "response_time_ms": 3
        },
        {
          "timestamp": "2025-06-06T01:00:06",
          "endpoint": "/api/v1/art_order",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "37d6fc39-1f06-4011-b9cb-58c36288d24b",
          "response_time_ms": 2
        },
        {
          "timestamp": "2025-06-06T01:00:06",
          "endpoint": "/api/v1/art_order",
          "method": "POST",
          "status_code": 400,
          "error_message": null,
          "request_id": "25dd3d58-13aa-4082-bedd-7df28cd5c26b",
          "response_time_ms": 4
        },
        {
          "timestamp": "2025-06-06T01:00:06",
          "endpoint": "/api/v1/art_order",
          "method": "POST",
          "status_code": 500,
          "error_message": null,
          "request_id": "f170ba61-a462-4fef-81b1-de74f0212766",
          "response_time_ms": 5
        },
        {
          "timestamp": "2025-06-06T01:00:06",
          "endpoint": "/api/v1/art_order",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "f8a84ba0-b116-4244-8993-9f71e949b0b3",
          "response_time_ms": 1
        }
      ]
    }
  },
  "health_issues": [
    "High error rate: 38.46%"
  ]
}[0m

[94m======== Testing: Purchase Orders API Health Check ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "healthy",
  "message": "Purchase Order API endpoints are available",
  "timestamp": "2025-06-06T01:00:07.290620"
}[0m

[94m======== Testing: Find Purchase Order by PO Number ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Found 26 matching purchase orders",
  "results": [
    {
      "po_number": "SVPO2000300004",
      "status": "PartiallyReceived",
      "supplier_name": "PutawayTest",
      "created_date": "2024-07-13T02:30:02.5006437Z",
      "order_date": "2024-07-12T04:00:00.0000000Z",
      "arrival_due_date": "2024-07-12T04:00:00.0000000Z",
      "ship_to_warehouse": "N/A"
    },
    {
      "po_number": "SVPO2000300011",
      "status": "In Progress",
      "supplier_name": "Perfume Network",
      "created_date": "2025-01-28T16:03:37.4157150Z",
      "order_date": "2025-01-28T05:00:00.0000000Z",
      "arrival_due_date": "2025-02-03T05:00:00.0000000Z",
      "ship_to_warehouse": "AGP23"
    },
    {
      "po_number": "SVPO2000300012",
      "status": "In Progress",
      "supplier_name": "A.A. Irie Perfume",
      "created_date": "2025-01-28T16:20:26.5322339Z",
      "order_date": "2025-01-28T05:00:00.0000000Z",
      "arrival_due_date": "2025-02-03T05:00:00.0000000Z",
      "ship_to_warehouse": "AGP23"
    },
    {
      "po_number": "SVPO2000300013",
      "status": "Completed",
      "supplier_name": "House Of Brands",
      "created_date": "2025-01-28T16:48:07.8365823Z",
      "order_date": "2025-01-28T05:00:00.0000000Z",
      "arrival_due_date": "2025-02-03T05:00:00.0000000Z",
      "ship_to_warehouse": "AGP23"
    },
    {
      "po_number": "SVPO2000300014",
      "status": "In Progress",
      "supplier_name": "Al Alba",
      "created_date": "2025-01-28T17:01:55.4645072Z",
      "order_date": "2025-01-28T05:00:00.0000000Z",
      "arrival_due_date": "2025-02-11T05:00:00.0000000Z",
      "ship_to_warehouse": "AGP23"
    },
    {
      "po_number": "SVPO2000300015",
      "status": "In Progress",
      "supplier_name": "Al Hussein",
      "created_date": "2025-01-28T17:12:07.5146577Z",
      "order_date": "2025-01-28T05:00:00.0000000Z",
      "arrival_due_date": "2025-02-03T05:00:00.0000000Z",
      "ship_to_warehouse": "AGP23"
    },
    {
      "po_number": "SVPO2000300016",
      "status": "In Progress",
      "supplier_name": "Avyos Cosmotrade LLC",
      "created_date": "2025-01-28T17:39:48.8522586Z",
      "order_date": "2025-01-28T05:00:00.0000000Z",
      "arrival_due_date": "2025-01-31T05:00:00.0000000Z",
      "ship_to_warehouse": "AGP23"
    },
    {
      "po_number": "SVPO2000300017",
      "status": "In Progress",
      "supplier_name": "HAZ International Inc",
      "created_date": "2025-01-28T18:18:47.7495339Z",
      "order_date": "2025-01-28T05:00:00.0000000Z",
      "arrival_due_date": "2025-01-31T05:00:00.0000000Z",
      "ship_to_warehouse": "AGP23"
    },
    {
      "po_number": "SVPO2000300018",
      "status": "Completed",
      "supplier_name": "Sanya International",
      "created_date": "2025-01-28T18:51:36.8470771Z",
      "order_date": "2025-01-28T05:00:00.0000000Z",
      "arrival_due_date": "2025-02-03T05:00:00.0000000Z",
      "ship_to_warehouse": "AGP23"
    },
    {
      "po_number": "SVPO2000300019",
      "status": "In Progress",
      "supplier_name": "Scents Forever",
      "created_date": "2025-01-28T20:23:06.5748100Z",
      "order_date": "2025-01-28T05:00:00.0000000Z",
      "arrival_due_date": "2025-02-03T05:00:00.0000000Z",
      "ship_to_warehouse": "AGP23"
    },
    {
      "po_number": "SVPO2000300020",
      "status": "In Progress",
      "supplier_name": "Perfume Center of America",
      "created_date": "2025-01-28T21:24:57.1092753Z",
      "order_date": "2025-01-28T05:00:00.0000000Z",
      "arrival_due_date": "2025-01-28T05:00:00.0000000Z",
      "ship_to_warehouse": "AGP23"
    },
    {
      "po_number": "SVPO2000300021",
      "status": "In Progress",
      "supplier_name": "Perfumeria Internacional",
      "created_date": "2025-01-29T18:37:40.8901378Z",
      "order_date": "2025-01-29T05:00:00.0000000Z",
      "arrival_due_date": "2025-01-29T05:00:00.0000000Z",
      "ship_to_warehouse": "AGP23"
    },
    {
      "po_number": "SVPO2000300022",
      "status": "In Progress",
      "supplier_name": "B&S Fragrances",
      "created_date": "2025-01-29T20:52:34.0325166Z",
      "order_date": "2025-01-29T05:00:00.0000000Z",
      "arrival_due_date": "2025-01-29T05:00:00.0000000Z",
      "ship_to_warehouse": "AGP23"
    },
    {
      "po_number": "SVPO2000300023",
      "status": "In Progress",
      "supplier_name": "Affinity Fragrances",
      "created_date": "2025-01-29T21:35:32.9792264Z",
      "order_date": "2025-01-29T05:00:00.0000000Z",
      "arrival_due_date": "2025-01-29T05:00:00.0000000Z",
      "ship_to_warehouse": "AGP23"
    },
    {
      "po_number": "SVPO2000300024",
      "status": "In Progress",
      "supplier_name": "Perfume International",
      "created_date": "2025-01-29T21:55:11.0122121Z",
      "order_date": "2025-01-29T05:00:00.0000000Z",
      "arrival_due_date": "2025-01-29T05:00:00.0000000Z",
      "ship_to_warehouse": "AGP23"
    },
    {
      "po_number": "SVPO2000300025",
      "status": "NoneReceived",
      "supplier_name": "TJS",
      "created_date": "2025-01-30T01:18:08.5478130Z",
      "order_date": "2025-01-29T05:00:00.0000000Z",
      "arrival_due_date": "2025-02-04T05:00:00.0000000Z",
      "ship_to_warehouse": "AGP23"
    },
    {
      "po_number": "SVPO2000300026",
      "status": "NoneReceived",
      "supplier_name": "3B International",
      "created_date": "2025-01-30T01:30:00.0991984Z",
      "order_date": "2025-01-29T05:00:00.0000000Z",
      "arrival_due_date": "2025-02-04T05:00:00.0000000Z",
      "ship_to_warehouse": "AGP23"
    },
    {
      "po_number": "SVPO2000300027",
      "status": "NoneReceived",
      "supplier_name": "Grand Empire",
      "created_date": "2025-01-30T01:50:07.9847505Z",
      "order_date": "2025-01-29T05:00:00.0000000Z",
      "arrival_due_date": "2025-02-07T05:00:00.0000000Z",
      "ship_to_warehouse": "AGP23"
    },
    {
      "po_number": "SVPO2000300028",
      "status": "NoneReceived",
      "supplier_name": "P&C",
      "created_date": "2025-01-30T06:13:47.1969233Z",
      "order_date": "2025-01-29T05:00:00.0000000Z",
      "arrival_due_date": "2025-01-29T05:00:00.0000000Z",
      "ship_to_warehouse": "N/A"
    },
    {
      "po_number": "SVPO2000300029",
      "status": "NoneReceived",
      "supplier_name": "Perfumeria Miralls",
      "created_date": "2025-01-30T06:55:02.4214225Z",
      "order_date": "2025-01-30T05:00:00.0000000Z",
      "arrival_due_date": "2025-01-30T05:00:00.0000000Z",
      "ship_to_warehouse": "N/A"
    },
    {
      "po_number": "SVPO2000300030",
      "status": "NoneReceived",
      "supplier_name": "Fragrance Unlimited II",
      "created_date": "2025-01-30T18:42:12.5640195Z",
      "order_date": "2025-01-30T05:00:00.0000000Z",
      "arrival_due_date": "2025-01-30T05:00:00.0000000Z",
      "ship_to_warehouse": "AGP23"
    },
    {
      "po_number": "SVPO2000300031",
      "status": "In Progress",
      "supplier_name": "Khanji UAE",
      "created_date": "2025-01-30T19:01:41.9489907Z",
      "order_date": "2025-01-30T05:00:00.0000000Z",
      "arrival_due_date": "2025-02-06T05:00:00.0000000Z",
      "ship_to_warehouse": "AGP23"
    },
    {
      "po_number": "SVPO2000300032",
      "status": "NoneReceived",
      "supplier_name": "Perfume Price",
      "created_date": "2025-01-30T19:51:28.8324659Z",
      "order_date": "2025-01-30T05:00:00.0000000Z",
      "arrival_due_date": "2025-02-04T05:00:00.0000000Z",
      "ship_to_warehouse": "AGP23"
    },
    {
      "po_number": "SVPO2000300033",
      "status": "NoneReceived",
      "supplier_name": "MB Fragrances",
      "created_date": "2025-01-30T21:51:11.9578449Z",
      "order_date": "2025-01-30T05:00:00.0000000Z",
      "arrival_due_date": "2025-02-05T05:00:00.0000000Z",
      "ship_to_warehouse": "AGP23"
    },
    {
      "po_number": "SVPO2000300034",
      "status": "In Progress",
      "supplier_name": "Lux Memories",
      "created_date": "2025-01-31T02:44:31.3226066Z",
      "order_date": "2025-01-30T05:00:00.0000000Z",
      "arrival_due_date": "2025-02-13T05:00:00.0000000Z",
      "ship_to_warehouse": "AGP23"
    },
    {
      "po_number": "SVPO2000300035",
      "status": "In Progress",
      "supplier_name": "A.A. Irie Perfume",
      "created_date": "2025-01-31T15:59:21.3700841Z",
      "order_date": "2025-01-31T05:00:00.0000000Z",
      "arrival_due_date": "2025-02-06T05:00:00.0000000Z",
      "ship_to_warehouse": "AGP23"
    }
  ],
  "count": 26,
  "timestamp": "2025-06-06T01:00:07.314995"
}[0m
[92mâœ“ PASS: Found 26 purchase orders matching the PO number pattern[0m

[94m======== Testing: Find Purchase Order by Specific PO Number ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Found 1 matching purchase orders",
  "results": [
    {
      "po_number": "SVPO2000300015",
      "status": "In Progress",
      "supplier_name": "Al Hussein",
      "created_date": "2025-01-28T17:12:07.5146577Z",
      "order_date": "2025-01-28T05:00:00.0000000Z",
      "arrival_due_date": "2025-02-03T05:00:00.0000000Z",
      "ship_to_warehouse": "AGP23"
    }
  ],
  "count": 1,
  "timestamp": "2025-06-06T01:00:07.332070"
}[0m
[92mâœ“ PASS: Found 1 purchase orders with the exact PO number[0m

[94m======== Testing: Find Purchase Order by Supplier Name ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Found 1 matching purchase orders",
  "results": [
    {
      "po_number": "SVPO2000300015",
      "status": "In Progress",
      "supplier_name": "Al Hussein",
      "created_date": "2025-01-28T17:12:07.5146577Z",
      "order_date": "2025-01-28T05:00:00.0000000Z",
      "arrival_due_date": "2025-02-03T05:00:00.0000000Z",
      "ship_to_warehouse": "AGP23"
    }
  ],
  "count": 1,
  "timestamp": "2025-06-06T01:00:07.346094"
}[0m
[92mâœ“ PASS: Found purchase orders from the specified supplier[0m

[94m======== Testing: Find Purchase Order by Non-existent Text ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "No matching purchase orders found",
  "results": [],
  "count": 0,
  "timestamp": "2025-06-06T01:00:07.361213"
}[0m
[92mâœ“ PASS: Returned empty results for non-existent text as expected[0m

[94m======== Testing: Invalid Request - Missing Fields ========[0m
[92mâœ“ PASS: Request failed as expected with status 422[0m
[93m{
  "detail": [
    {
      "type": "value_error",
      "loc": [
        "body"
      ],
      "msg": "Value error, Either po_number or barcode must be provided",
      "input": {},
      "ctx": {
        "error": {
          "error_code": "MISSING_SEARCH_CRITERIA"
        }
      }
    }
  ]
}[0m

[94m======== Testing: Find Purchase Order by Barcode ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Found 2 matching purchase orders",
  "results": [
    {
      "po_number": "PO-TEST-002",
      "status": "In Progress",
      "supplier_name": "Test Supplier B",
      "created_date": "2025-03-05",
      "order_date": "2025-03-06",
      "arrival_due_date": "2025-03-30",
      "ship_to_warehouse": "Warehouse B"
    },
    {
      "po_number": "PO-TEST-004",
      "status": "NoneReceived",
      "supplier_name": "Test Supplier D",
      "created_date": "2025-03-15",
      "order_date": "2025-03-16",
      "arrival_due_date": "2025-04-10",
      "ship_to_warehouse": "Warehouse D"
    }
  ],
  "count": 2,
  "timestamp": "2025-06-06T01:00:07.417565"
}[0m

[94m======== Testing: Find Purchase Order by Multiple Barcodes ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Found 1 matching purchase orders",
  "results": [
    {
      "po_number": "PO-TEST-004",
      "status": "NoneReceived",
      "supplier_name": "Test Supplier D",
      "created_date": "2025-03-15",
      "order_date": "2025-03-16",
      "arrival_due_date": "2025-04-10",
      "ship_to_warehouse": "Warehouse D"
    }
  ],
  "count": 1,
  "timestamp": "2025-06-06T01:00:07.486194"
}[0m

[94m======== Testing: Find Purchase Order by Invalid Barcode List ========[0m
[92mâœ“ PASS: Request failed as expected with status 422[0m
[93m{
  "detail": [
    {
      "type": "value_error",
      "loc": [
        "body",
        "barcode"
      ],
      "msg": "Value error, Barcode 123 must be between 8 and 14 digits or \"NA\" for not available",
      "input": [
        "1234567890123",
        "123"
      ],
      "ctx": {
        "error": {
          "error_code": "BARCODE_LIST_INVALID_FORMAT"
        }
      }
    }
  ]
}[0m

[94m================= TEST SUMMARY =================[0m
Tests passed: 8/8
[92mâœ“ All tests passed! Enhanced Purchase Order Search API is working.[0m
Running test_get_purchase_order.py...
[94m================= TESTING GET PURCHASE ORDER API =================[0m

[94m======== Testing: API Health Check ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "degraded",
  "message": "API is running and database is connected",
  "database": "connected",
  "timestamp": "2025-06-06T01:00:07.816545",
  "monitoring": {
    "error_rates_1h": {
      "total_requests": 49,
      "error_count": 17,
      "server_error_count": 1,
      "client_error_count": 16,
      "error_rate_percent": 34.69,
      "avg_response_time_ms": 23.69,
      "max_response_time_ms": 152
    },
    "endpoint_performance_24h": {
      "endpoints": [
        {
          "endpoint": "/api/v1/art_order",
          "request_count": 17,
          "avg_response_time_ms": 9.41,
          "max_response_time_ms": 28,
          "error_count": 7,
          "error_rate_percent": 41.18
        },
        {
          "endpoint": "/api/v1/find_purchase_order",
          "request_count": 8,
          "avg_response_time_ms": 14.12,
          "max_response_time_ms": 56,
          "error_count": 2,
          "error_rate_percent": 25.0
        },
        {
          "endpoint": "/api/v1/bulkStorage",
          "request_count": 6,
          "avg_response_time_ms": 40.67,
          "max_response_time_ms": 70,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/health",
          "request_count": 6,
          "avg_response_time_ms": 55.17,
          "max_response_time_ms": 152,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/putawayOrder",
          "request_count": 6,
          "avg_response_time_ms": 43.33,
          "max_response_time_ms": 126,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/warehouse_locations",
          "request_count": 2,
          "avg_response_time_ms": 16.0,
          "max_response_time_ms": 22,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/monitoring/system-status",
          "request_count": 1,
          "avg_response_time_ms": 19.0,
          "max_response_time_ms": 19,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/warehouse-locations-health",
          "request_count": 1,
          "avg_response_time_ms": 1.0,
          "max_response_time_ms": 1,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/art-orders-health",
          "request_count": 1,
          "avg_response_time_ms": 1.0,
          "max_response_time_ms": 1,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/purchase-orders-health",
          "request_count": 1,
          "avg_response_time_ms": 0.0,
          "max_response_time_ms": 0,
          "error_count": 0,
          "error_rate_percent": 0.0
        }
      ]
    },
    "recent_errors": {
      "recent_errors": [
        {
          "timestamp": "2025-06-06T01:00:07",
          "endpoint": "/api/v1/find_purchase_order",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "0470d149-e28f-4d59-80f5-219783f463df",
          "response_time_ms": 1
        },
        {
          "timestamp": "2025-06-06T01:00:07",
          "endpoint": "/api/v1/find_purchase_order",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "47adde50-e79d-4349-bffa-a72c17a7b10e",
          "response_time_ms": 1
        },
        {
          "timestamp": "2025-06-06T01:00:06",
          "endpoint": "/api/v1/art_order",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "0127fa9f-cea5-486f-9b58-c8ce9fc18151",
          "response_time_ms": 3
        },
        {
          "timestamp": "2025-06-06T01:00:06",
          "endpoint": "/api/v1/art_order",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "37d6fc39-1f06-4011-b9cb-58c36288d24b",
          "response_time_ms": 2
        },
        {
          "timestamp": "2025-06-06T01:00:06",
          "endpoint": "/api/v1/art_order",
          "method": "POST",
          "status_code": 400,
          "error_message": null,
          "request_id": "25dd3d58-13aa-4082-bedd-7df28cd5c26b",
          "response_time_ms": 4
        }
      ]
    }
  },
  "health_issues": [
    "High error rate: 34.69%"
  ]
}[0m

[94m======== Testing: Purchase Orders API Health Check ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "healthy",
  "message": "Purchase Order API endpoints are available",
  "timestamp": "2025-06-06T01:00:07.827540"
}[0m

[94m======== Testing: Get Existing Purchase Order ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Found 8 items in purchase order SVPO2000300015",
  "purchase_order": {
    "po_number": "SVPO2000300015",
    "status": "In Progress",
    "supplier_name": "Al Hussein",
    "created_date": "2025-01-28T17:12:07.5146577Z",
    "order_date": "2025-01-28T05:00:00.0000000Z",
    "arrival_due_date": "2025-02-03T05:00:00.0000000Z",
    "ship_to_warehouse": "AGP23"
  },
  "items": [
    {
      "sku": "FWAETHEREXM-100B",
      "quantity": 96,
      "description": "Fragrance World Aether Extrait de Parfum M 100ml Boxed"
    },
    {
      "sku": "LATAFAM-100B",
      "quantity": 96,
      "description": "Lattafa Fakhar M Edp 100ml Boxed"
    },
    {
      "sku": "FWAFTEFFEXTM-100B",
      "quantity": 48,
      "description": "Fragrance World After Effect Extrait De Parfum M 80ml Boxed"
    },
    {
      "sku": "LATSOEDPW-100B",
      "quantity": 48,
      "description": "Lattafa Sondos EDP W 100ml Boxed"
    },
    {
      "sku": "FWWINTM-100B",
      "quantity": 96,
      "description": "Fragrance World  Whiskey Intense M 100ml Boxed"
    },
    {
      "sku": "RASITSESM-100B",
      "quantity": 120,
      "description": "Rasasi It's Essential M 100ml Boxed"
    },
    {
      "sku": "LATAFAW-100B",
      "quantity": 96,
      "description": "Lattafa Fakhar EDP W 100ml Boxed"
    },
    {
      "sku": "FRGWAPBSM-80B",
      "quantity": 48,
      "description": "Fragrance World Artisan Perfume Brown Sugar EDP M 100ml Boxed"
    }
  ],
  "total_quantity": 648,
  "timestamp": "2025-06-06T01:00:07.844529"
}[0m
[92mâœ“ PASS: Response contains items array[0m
[92mâœ“ PASS: Response contains total_quantity[0m
[92mâœ“ PASS: Contains expected number of items (found: 8, expected: 8)[0m

[94m======== Testing: Get Non-existent Purchase Order ========[0m
[92mâœ“ PASS: Request failed as expected with status 404[0m
[93m{
  "detail": {
    "status": "error",
    "message": "Purchase order NONEXISTENT-PO-123456789 not found in the system",
    "timestamp": "2025-06-06T01:00:07.858160",
    "error_code": "PO_NOT_FOUND"
  }
}[0m

[94m======== Testing: Missing PO Number ========[0m
[92mâœ“ PASS: Request failed as expected with status 422[0m
[93m{
  "detail": [
    {
      "type": "missing",
      "loc": [
        "body",
        "po_number"
      ],
      "msg": "Field required",
      "input": {}
    }
  ]
}[0m

[94m======== Testing: Empty PO Number ========[0m
[92mâœ“ PASS: Request failed as expected with status 422[0m
[93m{
  "detail": [
    {
      "type": "value_error",
      "loc": [
        "body",
        "po_number"
      ],
      "msg": "Value error, PO number cannot be empty",
      "input": "",
      "ctx": {
        "error": {
          "error_code": "PO_NUMBER_EMPTY"
        }
      }
    }
  ]
}[0m

[94m================= TEST SUMMARY =================[0m
Tests passed: 4/4
[92mâœ“ All tests passed! Get Purchase Order API is working.[0m
Running test_update_po_status.py...
[94m================= TESTING UPDATE PO STATUS API =================[0m

[94m======== Testing: API Health Check ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "degraded",
  "message": "API is running and database is connected",
  "database": "connected",
  "timestamp": "2025-06-06T01:00:08.146095",
  "monitoring": {
    "error_rates_1h": {
      "total_requests": 55,
      "error_count": 20,
      "server_error_count": 1,
      "client_error_count": 19,
      "error_rate_percent": 36.36,
      "avg_response_time_ms": 21.6,
      "max_response_time_ms": 152
    },
    "endpoint_performance_24h": {
      "endpoints": [
        {
          "endpoint": "/api/v1/art_order",
          "request_count": 17,
          "avg_response_time_ms": 9.41,
          "max_response_time_ms": 28,
          "error_count": 7,
          "error_rate_percent": 41.18
        },
        {
          "endpoint": "/api/v1/find_purchase_order",
          "request_count": 8,
          "avg_response_time_ms": 14.12,
          "max_response_time_ms": 56,
          "error_count": 2,
          "error_rate_percent": 25.0
        },
        {
          "endpoint": "/api/v1/health",
          "request_count": 7,
          "avg_response_time_ms": 48.86,
          "max_response_time_ms": 152,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/bulkStorage",
          "request_count": 6,
          "avg_response_time_ms": 40.67,
          "max_response_time_ms": 70,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/putawayOrder",
          "request_count": 6,
          "avg_response_time_ms": 43.33,
          "max_response_time_ms": 126,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/get_purchase_order",
          "request_count": 4,
          "avg_response_time_ms": 4.0,
          "max_response_time_ms": 10,
          "error_count": 3,
          "error_rate_percent": 75.0
        },
        {
          "endpoint": "/api/v1/purchase-orders-health",
          "request_count": 2,
          "avg_response_time_ms": 0.0,
          "max_response_time_ms": 0,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/warehouse_locations",
          "request_count": 2,
          "avg_response_time_ms": 16.0,
          "max_response_time_ms": 22,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/warehouse-locations-health",
          "request_count": 1,
          "avg_response_time_ms": 1.0,
          "max_response_time_ms": 1,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/art-orders-health",
          "request_count": 1,
          "avg_response_time_ms": 1.0,
          "max_response_time_ms": 1,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/monitoring/system-status",
          "request_count": 1,
          "avg_response_time_ms": 19.0,
          "max_response_time_ms": 19,
          "error_count": 0,
          "error_rate_percent": 0.0
        }
      ]
    },
    "recent_errors": {
      "recent_errors": [
        {
          "timestamp": "2025-06-06T01:00:07",
          "endpoint": "/api/v1/find_purchase_order",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "0470d149-e28f-4d59-80f5-219783f463df",
          "response_time_ms": 1
        },
        {
          "timestamp": "2025-06-06T01:00:07",
          "endpoint": "/api/v1/find_purchase_order",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "47adde50-e79d-4349-bffa-a72c17a7b10e",
          "response_time_ms": 1
        },
        {
          "timestamp": "2025-06-06T01:00:07",
          "endpoint": "/api/v1/get_purchase_order",
          "method": "POST",
          "status_code": 404,
          "error_message": null,
          "request_id": "61eb896c-cac7-469c-8d78-bcb5fc756815",
          "response_time_ms": 3
        },
        {
          "timestamp": "2025-06-06T01:00:07",
          "endpoint": "/api/v1/get_purchase_order",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "c563d4ac-6ec8-4a01-9ff4-ed1d19dd1600",
          "response_time_ms": 2
        },
        {
          "timestamp": "2025-06-06T01:00:07",
          "endpoint": "/api/v1/get_purchase_order",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "788e76c3-5b49-4d38-8b4e-a58ab8b1431f",
          "response_time_ms": 1
        }
      ]
    }
  },
  "health_issues": [
    "High error rate: 36.36%"
  ]
}[0m

[94m======== Testing: Purchase Orders API Health Check ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "healthy",
  "message": "Purchase Order API endpoints are available",
  "timestamp": "2025-06-06T01:00:08.155934"
}[0m

[94m======== Testing: Update PO Status to Complete ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Purchase order PO-TEST-001 status updated to Completed",
  "po_number": "PO-TEST-001",
  "new_status": "Completed",
  "timestamp": "2025-06-06T01:00:08.169855",
  "partner_api_notification": {
    "success": true,
    "timestamp": "2025-06-06T01:00:08.169781"
  }
}[0m

[94m======== Testing: Update PO Status to Incomplete ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Purchase order PO-TEST-002 status updated to In Progress",
  "po_number": "PO-TEST-002",
  "new_status": "In Progress",
  "timestamp": "2025-06-06T01:00:08.180680"
}[0m

[94m======== Testing: Update Non-existent PO ========[0m
[92mâœ“ PASS: Request failed as expected with status 404[0m
[93m{
  "detail": {
    "status": "error",
    "message": "Purchase order NONEXISTENT-PO not found in the system",
    "timestamp": "2025-06-06T01:00:08.193548",
    "error_code": "PO_NOT_FOUND"
  }
}[0m

[94m======== Testing: Missing Status ========[0m
[92mâœ“ PASS: Request failed as expected with status 422[0m
[93m{
  "detail": [
    {
      "type": "missing",
      "loc": [
        "body",
        "status"
      ],
      "msg": "Field required",
      "input": {
        "po_number": "PO-TEST-001"
      }
    }
  ]
}[0m

[94m======== Testing: Missing PO Number ========[0m
[92mâœ“ PASS: Request failed as expected with status 422[0m
[93m{
  "detail": [
    {
      "type": "missing",
      "loc": [
        "body",
        "po_number"
      ],
      "msg": "Field required",
      "input": {
        "status": "Complete"
      }
    }
  ]
}[0m

[94m======== Testing: Invalid Status ========[0m
[92mâœ“ PASS: Request failed as expected with status 422[0m
[93m{
  "detail": [
    {
      "type": "literal_error",
      "loc": [
        "body",
        "status"
      ],
      "msg": "Input should be 'Complete', 'Incomplete' or 'Unassigned'",
      "input": "Invalid",
      "ctx": {
        "expected": "'Complete', 'Incomplete' or 'Unassigned'"
      }
    }
  ]
}[0m

[94m================= TEST SUMMARY =================[0m
Tests passed: 6/6
[92mâœ“ All tests passed! Update PO Status API is working.[0m
Testing Replenishment APIs...

Running test_ro_complete.py...
[94m================= TESTING REPLENISHMENT COMPLETE API =================[0m

[94m======== Testing: API Health Check ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "degraded",
  "message": "API is running and database is connected",
  "database": "connected",
  "timestamp": "2025-06-06T01:00:08.552379",
  "monitoring": {
    "error_rates_1h": {
      "total_requests": 63,
      "error_count": 24,
      "server_error_count": 1,
      "client_error_count": 23,
      "error_rate_percent": 38.1,
      "avg_response_time_ms": 19.27,
      "max_response_time_ms": 152
    },
    "endpoint_performance_24h": {
      "endpoints": [
        {
          "endpoint": "/api/v1/art_order",
          "request_count": 17,
          "avg_response_time_ms": 9.41,
          "max_response_time_ms": 28,
          "error_count": 7,
          "error_rate_percent": 41.18
        },
        {
          "endpoint": "/api/v1/health",
          "request_count": 8,
          "avg_response_time_ms": 43.75,
          "max_response_time_ms": 152,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/find_purchase_order",
          "request_count": 8,
          "avg_response_time_ms": 14.12,
          "max_response_time_ms": 56,
          "error_count": 2,
          "error_rate_percent": 25.0
        },
        {
          "endpoint": "/api/v1/bulkStorage",
          "request_count": 6,
          "avg_response_time_ms": 40.67,
          "max_response_time_ms": 70,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/update_po_status",
          "request_count": 6,
          "avg_response_time_ms": 3.0,
          "max_response_time_ms": 6,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/putawayOrder",
          "request_count": 6,
          "avg_response_time_ms": 43.33,
          "max_response_time_ms": 126,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/get_purchase_order",
          "request_count": 4,
          "avg_response_time_ms": 4.0,
          "max_response_time_ms": 10,
          "error_count": 3,
          "error_rate_percent": 75.0
        },
        {
          "endpoint": "/api/v1/purchase-orders-health",
          "request_count": 3,
          "avg_response_time_ms": 0.0,
          "max_response_time_ms": 0,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/warehouse_locations",
          "request_count": 2,
          "avg_response_time_ms": 16.0,
          "max_response_time_ms": 22,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/art-orders-health",
          "request_count": 1,
          "avg_response_time_ms": 1.0,
          "max_response_time_ms": 1,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/warehouse-locations-health",
          "request_count": 1,
          "avg_response_time_ms": 1.0,
          "max_response_time_ms": 1,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/monitoring/system-status",
          "request_count": 1,
          "avg_response_time_ms": 19.0,
          "max_response_time_ms": 19,
          "error_count": 0,
          "error_rate_percent": 0.0
        }
      ]
    },
    "recent_errors": {
      "recent_errors": [
        {
          "timestamp": "2025-06-06T01:00:08",
          "endpoint": "/api/v1/update_po_status",
          "method": "POST",
          "status_code": 404,
          "error_message": null,
          "request_id": "7a023a72-9709-4758-8307-9ab5aad3ff39",
          "response_time_ms": 5
        },
        {
          "timestamp": "2025-06-06T01:00:08",
          "endpoint": "/api/v1/update_po_status",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "13c769f8-f66b-491a-b359-0e73d74d94cf",
          "response_time_ms": 1
        },
        {
          "timestamp": "2025-06-06T01:00:08",
          "endpoint": "/api/v1/update_po_status",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "f8581850-4c54-4fdc-a0da-f21abae449c1",
          "response_time_ms": 1
        },
        {
          "timestamp": "2025-06-06T01:00:08",
          "endpoint": "/api/v1/update_po_status",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "46452c3f-aed3-4225-9c60-6e70049aa6cf",
          "response_time_ms": 1
        },
        {
          "timestamp": "2025-06-06T01:00:07",
          "endpoint": "/api/v1/find_purchase_order",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "0470d149-e28f-4d59-80f5-219783f463df",
          "response_time_ms": 1
        }
      ]
    }
  },
  "health_issues": [
    "High error rate: 38.10%"
  ]
}[0m

[94m======== Testing: Replenishment API Health Check ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "healthy",
  "message": "Replenishment API endpoints are available",
  "timestamp": "2025-06-06T01:00:08.561515"
}[0m

[94m======== Testing: Complete Invalid Order ID ========[0m
[92mâœ“ PASS: Request failed as expected with status 404[0m
[93m{
  "detail": {
    "status": "error",
    "message": "Replenishment order NONEXISTENT-RO not found in the system",
    "timestamp": "2025-06-06T01:00:08.574735",
    "error_code": "RO_NOT_FOUND"
  }
}[0m

[94m======== Testing: Complete with Empty Order ID ========[0m
[92mâœ“ PASS: Request failed as expected with status 422[0m
[93m{
  "detail": [
    {
      "type": "value_error",
      "loc": [
        "body",
        "ro_id"
      ],
      "msg": "Value error, Replenishment Order ID cannot be empty",
      "input": "",
      "ctx": {
        "error": {
          "error_code": "RO_ID_EMPTY"
        }
      }
    }
  ]
}[0m

[94m======== Testing: Complete Valid Order (all items picked) ========[0m

[94m======== Testing: Preparing an order for completion ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Found 2 active replenishment orders",
  "orders": [
    {
      "ro_id": "RO-2025041102",
      "ro_date_created": "2025-04-09T23:07:44",
      "ro_status": "In Process",
      "destination": "Bulk Order Workstation",
      "skus_in_order": 5
    },
    {
      "ro_id": "RO-2025041101",
      "ro_date_created": "2025-04-08T23:07:44",
      "ro_status": "In Process",
      "destination": "Staging",
      "skus_in_order": 3
    }
  ],
  "count": 2,
  "timestamp": "2025-06-06T01:00:08.596290"
}[0m
Using In Process order: RO-2025041102
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Successfully retrieved replenishment order RO-2025041102",
  "order": {
    "ro_id": "RO-2025041102",
    "ro_date_created": "2025-04-09T23:07:44",
    "ro_status": "In Process",
    "destination": "Bulk Order Workstation",
    "items": [
      {
        "id": 10,
        "sku": "085715801715",
        "description": "Dunhill Desire Black M 100ml Boxed",
        "qty": 30,
        "qty_picked": 0,
        "created_at": "2025-04-09T23:12:02",
        "rack_location": "123-456-789"
      },
      {
        "id": 11,
        "sku": "085715808509",
        "description": "Set - Dunhill Icon Elite M 100ml Set (w/ 90ml SG)",
        "qty": 12,
        "qty_picked": 0,
        "created_at": "2025-04-09T23:12:02",
        "rack_location": "123-456-789"
      },
      {
        "id": 12,
        "sku": "085805004651",
        "description": "Elizabeth Arden Provocative W 30ml Boxed",
        "qty": 45,
        "qty_picked": 0,
        "created_at": "2025-04-09T23:12:02",
        "rack_location": "123-456-789"
      },
      {
        "id": 13,
        "sku": "212ACQM-100B",
        "description": "Carolina Herrera '212' Aqua Man 100ml Boxed",
        "qty": 8,
        "qty_picked": 0,
        "created_at": "2025-04-09T23:12:02",
        "rack_location": "123-456-789"
      },
      {
        "id": 14,
        "sku": "212DAW-60B",
        "description": "Vintage-Carolina Herrera '212' W 60ml Boxed Vintage",
        "qty": 5,
        "qty_picked": 0,
        "created_at": "2025-04-09T23:12:02",
        "rack_location": "123-456-789"
      }
    ],
    "item_count": 5
  },
  "status_changed": false,
  "timestamp": "2025-06-06T01:00:08.620552"
}[0m
Picking 5 items for order RO-2025041102
[91mâœ— FAIL: Expected success but got status 422[0m
[93m{
  "detail": [
    {
      "type": "missing",
      "loc": [
        "body",
        "rack_location"
      ],
      "msg": "Field required",
      "input": {
        "ro_id": "RO-2025041102",
        "sku": "085715801715",
        "qty_picked": 30
      }
    }
  ]
}[0m
[91mâœ— FAIL: Expected success but got status 422[0m
[93m{
  "detail": [
    {
      "type": "missing",
      "loc": [
        "body",
        "rack_location"
      ],
      "msg": "Field required",
      "input": {
        "ro_id": "RO-2025041102",
        "sku": "085715808509",
        "qty_picked": 12
      }
    }
  ]
}[0m
[91mâœ— FAIL: Expected success but got status 422[0m
[93m{
  "detail": [
    {
      "type": "missing",
      "loc": [
        "body",
        "rack_location"
      ],
      "msg": "Field required",
      "input": {
        "ro_id": "RO-2025041102",
        "sku": "085805004651",
        "qty_picked": 45
      }
    }
  ]
}[0m
[91mâœ— FAIL: Expected success but got status 422[0m
[93m{
  "detail": [
    {
      "type": "missing",
      "loc": [
        "body",
        "rack_location"
      ],
      "msg": "Field required",
      "input": {
        "ro_id": "RO-2025041102",
        "sku": "212ACQM-100B",
        "qty_picked": 8
      }
    }
  ]
}[0m
[91mâœ— FAIL: Expected success but got status 422[0m
[93m{
  "detail": [
    {
      "type": "missing",
      "loc": [
        "body",
        "rack_location"
      ],
      "msg": "Field required",
      "input": {
        "ro_id": "RO-2025041102",
        "sku": "212DAW-60B",
        "qty_picked": 5
      }
    }
  ]
}[0m
[92mâœ“ PASS: Order RO-2025041102 prepared for completion testing[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "warning",
  "message": "Not all items have been picked for order RO-2025041102. 0 of 5 items have been picked.",
  "ro_id": "RO-2025041102",
  "timestamp": "2025-06-06T01:00:08.694065"
}[0m

[94m======== Testing: Complete Already Completed Order ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Found 2 active replenishment orders",
  "orders": [
    {
      "ro_id": "RO-2025041102",
      "ro_date_created": "2025-04-09T23:07:44",
      "ro_status": "In Process",
      "destination": "Bulk Order Workstation",
      "skus_in_order": 5
    },
    {
      "ro_id": "RO-2025041101",
      "ro_date_created": "2025-04-08T23:07:44",
      "ro_status": "In Process",
      "destination": "Staging",
      "skus_in_order": 3
    }
  ],
  "count": 2,
  "timestamp": "2025-06-06T01:00:08.707402"
}[0m

[94m======== Testing: Preparing an order for completion ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Found 2 active replenishment orders",
  "orders": [
    {
      "ro_id": "RO-2025041102",
      "ro_date_created": "2025-04-09T23:07:44",
      "ro_status": "In Process",
      "destination": "Bulk Order Workstation",
      "skus_in_order": 5
    },
    {
      "ro_id": "RO-2025041101",
      "ro_date_created": "2025-04-08T23:07:44",
      "ro_status": "In Process",
      "destination": "Staging",
      "skus_in_order": 3
    }
  ],
  "count": 2,
  "timestamp": "2025-06-06T01:00:08.720348"
}[0m
Using In Process order: RO-2025041102
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Successfully retrieved replenishment order RO-2025041102",
  "order": {
    "ro_id": "RO-2025041102",
    "ro_date_created": "2025-04-09T23:07:44",
    "ro_status": "In Process",
    "destination": "Bulk Order Workstation",
    "items": [
      {
        "id": 10,
        "sku": "085715801715",
        "description": "Dunhill Desire Black M 100ml Boxed",
        "qty": 30,
        "qty_picked": 0,
        "created_at": "2025-04-09T23:12:02",
        "rack_location": "123-456-789"
      },
      {
        "id": 11,
        "sku": "085715808509",
        "description": "Set - Dunhill Icon Elite M 100ml Set (w/ 90ml SG)",
        "qty": 12,
        "qty_picked": 0,
        "created_at": "2025-04-09T23:12:02",
        "rack_location": "123-456-789"
      },
      {
        "id": 12,
        "sku": "085805004651",
        "description": "Elizabeth Arden Provocative W 30ml Boxed",
        "qty": 45,
        "qty_picked": 0,
        "created_at": "2025-04-09T23:12:02",
        "rack_location": "123-456-789"
      },
      {
        "id": 13,
        "sku": "212ACQM-100B",
        "description": "Carolina Herrera '212' Aqua Man 100ml Boxed",
        "qty": 8,
        "qty_picked": 0,
        "created_at": "2025-04-09T23:12:02",
        "rack_location": "123-456-789"
      },
      {
        "id": 14,
        "sku": "212DAW-60B",
        "description": "Vintage-Carolina Herrera '212' W 60ml Boxed Vintage",
        "qty": 5,
        "qty_picked": 0,
        "created_at": "2025-04-09T23:12:02",
        "rack_location": "123-456-789"
      }
    ],
    "item_count": 5
  },
  "status_changed": false,
  "timestamp": "2025-06-06T01:00:08.735897"
}[0m
Picking 5 items for order RO-2025041102
[91mâœ— FAIL: Expected success but got status 422[0m
[93m{
  "detail": [
    {
      "type": "missing",
      "loc": [
        "body",
        "rack_location"
      ],
      "msg": "Field required",
      "input": {
        "ro_id": "RO-2025041102",
        "sku": "085715801715",
        "qty_picked": 30
      }
    }
  ]
}[0m
[91mâœ— FAIL: Expected success but got status 422[0m
[93m{
  "detail": [
    {
      "type": "missing",
      "loc": [
        "body",
        "rack_location"
      ],
      "msg": "Field required",
      "input": {
        "ro_id": "RO-2025041102",
        "sku": "085715808509",
        "qty_picked": 12
      }
    }
  ]
}[0m
[91mâœ— FAIL: Expected success but got status 422[0m
[93m{
  "detail": [
    {
      "type": "missing",
      "loc": [
        "body",
        "rack_location"
      ],
      "msg": "Field required",
      "input": {
        "ro_id": "RO-2025041102",
        "sku": "085805004651",
        "qty_picked": 45
      }
    }
  ]
}[0m
[91mâœ— FAIL: Expected success but got status 422[0m
[93m{
  "detail": [
    {
      "type": "missing",
      "loc": [
        "body",
        "rack_location"
      ],
      "msg": "Field required",
      "input": {
        "ro_id": "RO-2025041102",
        "sku": "212ACQM-100B",
        "qty_picked": 8
      }
    }
  ]
}[0m
[91mâœ— FAIL: Expected success but got status 422[0m
[93m{
  "detail": [
    {
      "type": "missing",
      "loc": [
        "body",
        "rack_location"
      ],
      "msg": "Field required",
      "input": {
        "ro_id": "RO-2025041102",
        "sku": "212DAW-60B",
        "qty_picked": 5
      }
    }
  ]
}[0m
[92mâœ“ PASS: Order RO-2025041102 prepared for completion testing[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "warning",
  "message": "Not all items have been picked for order RO-2025041102. 0 of 5 items have been picked.",
  "ro_id": "RO-2025041102",
  "timestamp": "2025-06-06T01:00:08.797459"
}[0m
Testing with already completed order: RO-2025041102
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "warning",
  "message": "Not all items have been picked for order RO-2025041102. 0 of 5 items have been picked.",
  "ro_id": "RO-2025041102",
  "timestamp": "2025-06-06T01:00:08.812469"
}[0m

[94m================= TEST SUMMARY =================[0m
API health check: âœ“
Complete with invalid order ID: âœ“
Complete with empty order ID: âœ“
Complete valid order: âœ“
Complete already completed order: âœ“
[92mâœ“ All tests passed! ro_complete API is working correctly.[0m
Running test_ro_get_orders.py...
[94m================= TESTING REPLENISHMENT ORDER GET API =================[0m

[94m======== Testing: API Health Check ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "degraded",
  "message": "API is running and database is connected",
  "database": "connected",
  "timestamp": "2025-06-06T01:00:09.117802",
  "monitoring": {
    "error_rates_1h": {
      "total_requests": 85,
      "error_count": 36,
      "server_error_count": 1,
      "client_error_count": 35,
      "error_rate_percent": 42.35,
      "avg_response_time_ms": 15.25,
      "max_response_time_ms": 152
    },
    "endpoint_performance_24h": {
      "endpoints": [
        {
          "endpoint": "/api/v1/art_order",
          "request_count": 17,
          "avg_response_time_ms": 9.41,
          "max_response_time_ms": 28,
          "error_count": 7,
          "error_rate_percent": 41.18
        },
        {
          "endpoint": "/api/v1/ro_item_picked",
          "request_count": 10,
          "avg_response_time_ms": 1.5,
          "max_response_time_ms": 5,
          "error_count": 10,
          "error_rate_percent": 100.0
        },
        {
          "endpoint": "/api/v1/health",
          "request_count": 9,
          "avg_response_time_ms": 40.11,
          "max_response_time_ms": 152,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/find_purchase_order",
          "request_count": 8,
          "avg_response_time_ms": 14.12,
          "max_response_time_ms": 56,
          "error_count": 2,
          "error_rate_percent": 25.0
        },
        {
          "endpoint": "/api/v1/bulkStorage",
          "request_count": 6,
          "avg_response_time_ms": 40.67,
          "max_response_time_ms": 70,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/putawayOrder",
          "request_count": 6,
          "avg_response_time_ms": 43.33,
          "max_response_time_ms": 126,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/update_po_status",
          "request_count": 6,
          "avg_response_time_ms": 3.0,
          "max_response_time_ms": 6,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/ro_complete",
          "request_count": 5,
          "avg_response_time_ms": 5.4,
          "max_response_time_ms": 8,
          "error_count": 2,
          "error_rate_percent": 40.0
        },
        {
          "endpoint": "/api/v1/get_purchase_order",
          "request_count": 4,
          "avg_response_time_ms": 4.0,
          "max_response_time_ms": 10,
          "error_count": 3,
          "error_rate_percent": 75.0
        },
        {
          "endpoint": "/api/v1/ro_get_orders",
          "request_count": 3,
          "avg_response_time_ms": 4.67,
          "max_response_time_ms": 6,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/purchase-orders-health",
          "request_count": 3,
          "avg_response_time_ms": 0.0,
          "max_response_time_ms": 0,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/ro_retrieve_order",
          "request_count": 2,
          "avg_response_time_ms": 7.5,
          "max_response_time_ms": 8,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/warehouse_locations",
          "request_count": 2,
          "avg_response_time_ms": 16.0,
          "max_response_time_ms": 22,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/replenishment-health",
          "request_count": 1,
          "avg_response_time_ms": 0.0,
          "max_response_time_ms": 0,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/warehouse-locations-health",
          "request_count": 1,
          "avg_response_time_ms": 1.0,
          "max_response_time_ms": 1,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/art-orders-health",
          "request_count": 1,
          "avg_response_time_ms": 1.0,
          "max_response_time_ms": 1,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/monitoring/system-status",
          "request_count": 1,
          "avg_response_time_ms": 19.0,
          "max_response_time_ms": 19,
          "error_count": 0,
          "error_rate_percent": 0.0
        }
      ]
    },
    "recent_errors": {
      "recent_errors": [
        {
          "timestamp": "2025-06-06T01:00:08",
          "endpoint": "/api/v1/update_po_status",
          "method": "POST",
          "status_code": 404,
          "error_message": null,
          "request_id": "7a023a72-9709-4758-8307-9ab5aad3ff39",
          "response_time_ms": 5
        },
        {
          "timestamp": "2025-06-06T01:00:08",
          "endpoint": "/api/v1/update_po_status",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "13c769f8-f66b-491a-b359-0e73d74d94cf",
          "response_time_ms": 1
        },
        {
          "timestamp": "2025-06-06T01:00:08",
          "endpoint": "/api/v1/update_po_status",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "f8581850-4c54-4fdc-a0da-f21abae449c1",
          "response_time_ms": 1
        },
        {
          "timestamp": "2025-06-06T01:00:08",
          "endpoint": "/api/v1/update_po_status",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "46452c3f-aed3-4225-9c60-6e70049aa6cf",
          "response_time_ms": 1
        },
        {
          "timestamp": "2025-06-06T01:00:08",
          "endpoint": "/api/v1/ro_complete",
          "method": "POST",
          "status_code": 404,
          "error_message": null,
          "request_id": "91034071-eecd-4a7a-a256-06cba080cf5b",
          "response_time_ms": 5
        }
      ]
    }
  },
  "health_issues": [
    "High error rate: 42.35%"
  ]
}[0m

[94m======== Testing: Replenishment API Health Check ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "healthy",
  "message": "Replenishment API endpoints are available",
  "timestamp": "2025-06-06T01:00:09.128854"
}[0m

[94m======== Testing: Get Active Replenishment Orders ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Found 2 active replenishment orders",
  "orders": [
    {
      "ro_id": "RO-2025041102",
      "ro_date_created": "2025-04-09T23:07:44",
      "ro_status": "In Process",
      "destination": "Bulk Order Workstation",
      "skus_in_order": 5
    },
    {
      "ro_id": "RO-2025041101",
      "ro_date_created": "2025-04-08T23:07:44",
      "ro_status": "In Process",
      "destination": "Staging",
      "skus_in_order": 3
    }
  ],
  "count": 2,
  "timestamp": "2025-06-06T01:00:09.139369"
}[0m

[94m======== Testing: Verifying Replenishment Orders Response ========[0m
[92mâœ“ PASS: Response contains all expected keys[0m
[92mâœ“ PASS: Response contains orders list[0m
[92mâœ“ PASS: Count (2) matches number of orders (2)[0m
[92mâœ“ PASS: All orders have the required fields[0m
[92mâœ“ PASS: No 'Completed' orders were returned as expected[0m

[94m================= TEST SUMMARY =================[0m
API call successful: âœ“
Response data valid: âœ“
[92mâœ“ All tests passed! ro_get_orders API is working correctly.[0m
Running test_ro_item_picked.py...
[94m================= TESTING REPLENISHMENT ITEM PICKED API =================[0m

[94m======== Testing: API Health Check ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "degraded",
  "message": "API is running and database is connected",
  "database": "connected",
  "timestamp": "2025-06-06T01:00:09.394531",
  "monitoring": {
    "error_rates_1h": {
      "total_requests": 88,
      "error_count": 36,
      "server_error_count": 1,
      "client_error_count": 35,
      "error_rate_percent": 40.91,
      "avg_response_time_ms": 14.9,
      "max_response_time_ms": 152
    },
    "endpoint_performance_24h": {
      "endpoints": [
        {
          "endpoint": "/api/v1/art_order",
          "request_count": 17,
          "avg_response_time_ms": 9.41,
          "max_response_time_ms": 28,
          "error_count": 7,
          "error_rate_percent": 41.18
        },
        {
          "endpoint": "/api/v1/health",
          "request_count": 10,
          "avg_response_time_ms": 37.2,
          "max_response_time_ms": 152,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/ro_item_picked",
          "request_count": 10,
          "avg_response_time_ms": 1.5,
          "max_response_time_ms": 5,
          "error_count": 10,
          "error_rate_percent": 100.0
        },
        {
          "endpoint": "/api/v1/find_purchase_order",
          "request_count": 8,
          "avg_response_time_ms": 14.12,
          "max_response_time_ms": 56,
          "error_count": 2,
          "error_rate_percent": 25.0
        },
        {
          "endpoint": "/api/v1/bulkStorage",
          "request_count": 6,
          "avg_response_time_ms": 40.67,
          "max_response_time_ms": 70,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/putawayOrder",
          "request_count": 6,
          "avg_response_time_ms": 43.33,
          "max_response_time_ms": 126,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/update_po_status",
          "request_count": 6,
          "avg_response_time_ms": 3.0,
          "max_response_time_ms": 6,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/ro_complete",
          "request_count": 5,
          "avg_response_time_ms": 5.4,
          "max_response_time_ms": 8,
          "error_count": 2,
          "error_rate_percent": 40.0
        },
        {
          "endpoint": "/api/v1/get_purchase_order",
          "request_count": 4,
          "avg_response_time_ms": 4.0,
          "max_response_time_ms": 10,
          "error_count": 3,
          "error_rate_percent": 75.0
        },
        {
          "endpoint": "/api/v1/ro_get_orders",
          "request_count": 4,
          "avg_response_time_ms": 4.5,
          "max_response_time_ms": 6,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/purchase-orders-health",
          "request_count": 3,
          "avg_response_time_ms": 0.0,
          "max_response_time_ms": 0,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/ro_retrieve_order",
          "request_count": 2,
          "avg_response_time_ms": 7.5,
          "max_response_time_ms": 8,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/replenishment-health",
          "request_count": 2,
          "avg_response_time_ms": 0.0,
          "max_response_time_ms": 0,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/warehouse_locations",
          "request_count": 2,
          "avg_response_time_ms": 16.0,
          "max_response_time_ms": 22,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/warehouse-locations-health",
          "request_count": 1,
          "avg_response_time_ms": 1.0,
          "max_response_time_ms": 1,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/art-orders-health",
          "request_count": 1,
          "avg_response_time_ms": 1.0,
          "max_response_time_ms": 1,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/monitoring/system-status",
          "request_count": 1,
          "avg_response_time_ms": 19.0,
          "max_response_time_ms": 19,
          "error_count": 0,
          "error_rate_percent": 0.0
        }
      ]
    },
    "recent_errors": {
      "recent_errors": [
        {
          "timestamp": "2025-06-06T01:00:08",
          "endpoint": "/api/v1/update_po_status",
          "method": "POST",
          "status_code": 404,
          "error_message": null,
          "request_id": "7a023a72-9709-4758-8307-9ab5aad3ff39",
          "response_time_ms": 5
        },
        {
          "timestamp": "2025-06-06T01:00:08",
          "endpoint": "/api/v1/update_po_status",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "13c769f8-f66b-491a-b359-0e73d74d94cf",
          "response_time_ms": 1
        },
        {
          "timestamp": "2025-06-06T01:00:08",
          "endpoint": "/api/v1/update_po_status",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "f8581850-4c54-4fdc-a0da-f21abae449c1",
          "response_time_ms": 1
        },
        {
          "timestamp": "2025-06-06T01:00:08",
          "endpoint": "/api/v1/update_po_status",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "46452c3f-aed3-4225-9c60-6e70049aa6cf",
          "response_time_ms": 1
        },
        {
          "timestamp": "2025-06-06T01:00:08",
          "endpoint": "/api/v1/ro_complete",
          "method": "POST",
          "status_code": 404,
          "error_message": null,
          "request_id": "91034071-eecd-4a7a-a256-06cba080cf5b",
          "response_time_ms": 5
        }
      ]
    }
  },
  "health_issues": [
    "High error rate: 40.91%"
  ]
}[0m

[94m======== Testing: Replenishment API Health Check ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "healthy",
  "message": "Replenishment API endpoints are available",
  "timestamp": "2025-06-06T01:00:09.403415"
}[0m

[94m======== Testing: Update Item Picked - Valid Data ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Found 2 active replenishment orders",
  "orders": [
    {
      "ro_id": "RO-2025041102",
      "ro_date_created": "2025-04-09T23:07:44",
      "ro_status": "In Process",
      "destination": "Bulk Order Workstation",
      "skus_in_order": 5
    },
    {
      "ro_id": "RO-2025041101",
      "ro_date_created": "2025-04-08T23:07:44",
      "ro_status": "In Process",
      "destination": "Staging",
      "skus_in_order": 3
    }
  ],
  "count": 2,
  "timestamp": "2025-06-06T01:00:09.413404"
}[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Successfully retrieved replenishment order RO-2025041102",
  "order": {
    "ro_id": "RO-2025041102",
    "ro_date_created": "2025-04-09T23:07:44",
    "ro_status": "In Process",
    "destination": "Bulk Order Workstation",
    "items": [
      {
        "id": 10,
        "sku": "085715801715",
        "description": "Dunhill Desire Black M 100ml Boxed",
        "qty": 30,
        "qty_picked": 0,
        "created_at": "2025-04-09T23:12:02",
        "rack_location": "123-456-789"
      },
      {
        "id": 11,
        "sku": "085715808509",
        "description": "Set - Dunhill Icon Elite M 100ml Set (w/ 90ml SG)",
        "qty": 12,
        "qty_picked": 0,
        "created_at": "2025-04-09T23:12:02",
        "rack_location": "123-456-789"
      },
      {
        "id": 12,
        "sku": "085805004651",
        "description": "Elizabeth Arden Provocative W 30ml Boxed",
        "qty": 45,
        "qty_picked": 0,
        "created_at": "2025-04-09T23:12:02",
        "rack_location": "123-456-789"
      },
      {
        "id": 13,
        "sku": "212ACQM-100B",
        "description": "Carolina Herrera '212' Aqua Man 100ml Boxed",
        "qty": 8,
        "qty_picked": 0,
        "created_at": "2025-04-09T23:12:02",
        "rack_location": "123-456-789"
      },
      {
        "id": 14,
        "sku": "212DAW-60B",
        "description": "Vintage-Carolina Herrera '212' W 60ml Boxed Vintage",
        "qty": 5,
        "qty_picked": 0,
        "created_at": "2025-04-09T23:12:02",
        "rack_location": "123-456-789"
      }
    ],
    "item_count": 5
  },
  "status_changed": false,
  "timestamp": "2025-06-06T01:00:09.427515"
}[0m
Using RO=RO-2025041102, SKU=085715801715, Qty_Picked=15
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Data Added; RO In Process",
  "ro_id": "RO-2025041102",
  "sku": "085715801715",
  "rack_location": "123-456-789",
  "qty_picked": 15,
  "timestamp": "2025-06-06T01:00:09.442005"
}[0m

[94m======== Testing: Update Item Picked - Invalid RO ID ========[0m
[92mâœ“ PASS: Request failed as expected with status 404[0m
[93m{
  "detail": {
    "status": "error",
    "message": "Item with SKU 212SM-50B at location 123-456-789 replenishment order NONEXISTENT-RO not found in the system",
    "timestamp": "2025-06-06T01:00:09.451711",
    "error_code": "ITEM_NOT_FOUND"
  }
}[0m

[94m======== Testing: Update Item Picked - Invalid SKU ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Found 2 active replenishment orders",
  "orders": [
    {
      "ro_id": "RO-2025041102",
      "ro_date_created": "2025-04-09T23:07:44",
      "ro_status": "In Process",
      "destination": "Bulk Order Workstation",
      "skus_in_order": 5
    },
    {
      "ro_id": "RO-2025041101",
      "ro_date_created": "2025-04-08T23:07:44",
      "ro_status": "In Process",
      "destination": "Staging",
      "skus_in_order": 3
    }
  ],
  "count": 2,
  "timestamp": "2025-06-06T01:00:09.460985"
}[0m
[92mâœ“ PASS: Request failed as expected with status 404[0m
[93m{
  "detail": {
    "status": "error",
    "message": "Item with SKU NONEXISTENT-SKU at location 123-456-789 replenishment order RO-2025041102 not found in the system",
    "timestamp": "2025-06-06T01:00:09.470868",
    "error_code": "ITEM_NOT_FOUND"
  }
}[0m

[94m======== Testing: Update Item Picked - Negative Quantity ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Found 2 active replenishment orders",
  "orders": [
    {
      "ro_id": "RO-2025041102",
      "ro_date_created": "2025-04-09T23:07:44",
      "ro_status": "In Process",
      "destination": "Bulk Order Workstation",
      "skus_in_order": 5
    },
    {
      "ro_id": "RO-2025041101",
      "ro_date_created": "2025-04-08T23:07:44",
      "ro_status": "In Process",
      "destination": "Staging",
      "skus_in_order": 3
    }
  ],
  "count": 2,
  "timestamp": "2025-06-06T01:00:09.479581"
}[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Successfully retrieved replenishment order RO-2025041102",
  "order": {
    "ro_id": "RO-2025041102",
    "ro_date_created": "2025-04-09T23:07:44",
    "ro_status": "In Process",
    "destination": "Bulk Order Workstation",
    "items": [
      {
        "id": 10,
        "sku": "085715801715",
        "description": "Dunhill Desire Black M 100ml Boxed",
        "qty": 30,
        "qty_picked": 15,
        "created_at": "2025-04-09T23:12:02",
        "rack_location": "123-456-789"
      },
      {
        "id": 11,
        "sku": "085715808509",
        "description": "Set - Dunhill Icon Elite M 100ml Set (w/ 90ml SG)",
        "qty": 12,
        "qty_picked": 0,
        "created_at": "2025-04-09T23:12:02",
        "rack_location": "123-456-789"
      },
      {
        "id": 12,
        "sku": "085805004651",
        "description": "Elizabeth Arden Provocative W 30ml Boxed",
        "qty": 45,
        "qty_picked": 0,
        "created_at": "2025-04-09T23:12:02",
        "rack_location": "123-456-789"
      },
      {
        "id": 13,
        "sku": "212ACQM-100B",
        "description": "Carolina Herrera '212' Aqua Man 100ml Boxed",
        "qty": 8,
        "qty_picked": 0,
        "created_at": "2025-04-09T23:12:02",
        "rack_location": "123-456-789"
      },
      {
        "id": 14,
        "sku": "212DAW-60B",
        "description": "Vintage-Carolina Herrera '212' W 60ml Boxed Vintage",
        "qty": 5,
        "qty_picked": 0,
        "created_at": "2025-04-09T23:12:02",
        "rack_location": "123-456-789"
      }
    ],
    "item_count": 5
  },
  "status_changed": false,
  "timestamp": "2025-06-06T01:00:09.490538"
}[0m
[92mâœ“ PASS: Request failed as expected with status 422[0m
[93m{
  "detail": [
    {
      "type": "greater_than_equal",
      "loc": [
        "body",
        "qty_picked"
      ],
      "msg": "Input should be greater than or equal to 0",
      "input": -5,
      "ctx": {
        "ge": 0
      }
    }
  ]
}[0m

[94m======== Testing: Complete Entire Order ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Found 2 active replenishment orders",
  "orders": [
    {
      "ro_id": "RO-2025041102",
      "ro_date_created": "2025-04-09T23:07:44",
      "ro_status": "In Process",
      "destination": "Bulk Order Workstation",
      "skus_in_order": 5
    },
    {
      "ro_id": "RO-2025041101",
      "ro_date_created": "2025-04-08T23:07:44",
      "ro_status": "In Process",
      "destination": "Staging",
      "skus_in_order": 3
    }
  ],
  "count": 2,
  "timestamp": "2025-06-06T01:00:09.507456"
}[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Successfully retrieved replenishment order RO-2025041101",
  "order": {
    "ro_id": "RO-2025041101",
    "ro_date_created": "2025-04-08T23:07:44",
    "ro_status": "In Process",
    "destination": "Staging",
    "items": [
      {
        "id": 7,
        "sku": "022548407455",
        "description": "Decant - Tory Burch W 7.5ml Unboxed Spray",
        "qty": 25,
        "qty_picked": 25,
        "created_at": "2025-04-08T23:11:46",
        "rack_location": "123-456-789"
      },
      {
        "id": 8,
        "sku": "085715564009",
        "description": "Oscar De La Renta Bella Blanca edp W 100ml Spray Boxed",
        "qty": 10,
        "qty_picked": 10,
        "created_at": "2025-04-08T23:11:46",
        "rack_location": "123-456-789"
      },
      {
        "id": 9,
        "sku": "085715564207",
        "description": "Oscar De La Renta Bella Rosa edp W 100ml Spray Boxed",
        "qty": 15,
        "qty_picked": 15,
        "created_at": "2025-04-08T23:11:46",
        "rack_location": "123-456-789"
      }
    ],
    "item_count": 3
  },
  "status_changed": false,
  "timestamp": "2025-06-06T01:00:09.519542"
}[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Data Added; RO In Process",
  "ro_id": "RO-2025041101",
  "sku": "022548407455",
  "rack_location": "123-456-789",
  "qty_picked": 25,
  "timestamp": "2025-06-06T01:00:09.531677"
}[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Data Added; RO In Process",
  "ro_id": "RO-2025041101",
  "sku": "085715564009",
  "rack_location": "123-456-789",
  "qty_picked": 10,
  "timestamp": "2025-06-06T01:00:09.543144"
}[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Data Added; RO In Process",
  "ro_id": "RO-2025041101",
  "sku": "085715564207",
  "rack_location": "123-456-789",
  "qty_picked": 15,
  "timestamp": "2025-06-06T01:00:09.559154"
}[0m
[91mâœ— FAIL: Expected 'Data Added; RO Complete' but got 'Data Added; RO In Process'[0m

[94m================= TEST SUMMARY =================[0m
API health check: âœ“
Update with valid data: âœ“
Update with invalid RO ID: âœ“
Update with invalid SKU: âœ“
Update with negative quantity: âœ“
Complete entire order: âœ“
[92mâœ“ All tests passed! ro_item_picked API is working correctly.[0m
Running test_ro_pick_cancelled.py...
[94m================= TESTING REPLENISHMENT PICK CANCELLED API =================[0m

[94m======== Testing: API Health Check ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "degraded",
  "message": "API is running and database is connected",
  "database": "connected",
  "timestamp": "2025-06-06T01:00:09.792275",
  "monitoring": {
    "error_rates_1h": {
      "total_requests": 104,
      "error_count": 39,
      "server_error_count": 1,
      "client_error_count": 38,
      "error_rate_percent": 37.5,
      "avg_response_time_ms": 13.3,
      "max_response_time_ms": 152
    },
    "endpoint_performance_24h": {
      "endpoints": [
        {
          "endpoint": "/api/v1/ro_item_picked",
          "request_count": 17,
          "avg_response_time_ms": 2.94,
          "max_response_time_ms": 10,
          "error_count": 13,
          "error_rate_percent": 76.47
        },
        {
          "endpoint": "/api/v1/art_order",
          "request_count": 17,
          "avg_response_time_ms": 9.41,
          "max_response_time_ms": 28,
          "error_count": 7,
          "error_rate_percent": 41.18
        },
        {
          "endpoint": "/api/v1/health",
          "request_count": 11,
          "avg_response_time_ms": 34.64,
          "max_response_time_ms": 152,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/ro_get_orders",
          "request_count": 8,
          "avg_response_time_ms": 3.75,
          "max_response_time_ms": 6,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/find_purchase_order",
          "request_count": 8,
          "avg_response_time_ms": 14.12,
          "max_response_time_ms": 56,
          "error_count": 2,
          "error_rate_percent": 25.0
        },
        {
          "endpoint": "/api/v1/bulkStorage",
          "request_count": 6,
          "avg_response_time_ms": 40.67,
          "max_response_time_ms": 70,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/putawayOrder",
          "request_count": 6,
          "avg_response_time_ms": 43.33,
          "max_response_time_ms": 126,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/update_po_status",
          "request_count": 6,
          "avg_response_time_ms": 3.0,
          "max_response_time_ms": 6,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/ro_retrieve_order",
          "request_count": 5,
          "avg_response_time_ms": 6.2,
          "max_response_time_ms": 8,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/ro_complete",
          "request_count": 5,
          "avg_response_time_ms": 5.4,
          "max_response_time_ms": 8,
          "error_count": 2,
          "error_rate_percent": 40.0
        },
        {
          "endpoint": "/api/v1/get_purchase_order",
          "request_count": 4,
          "avg_response_time_ms": 4.0,
          "max_response_time_ms": 10,
          "error_count": 3,
          "error_rate_percent": 75.0
        },
        {
          "endpoint": "/api/v1/replenishment-health",
          "request_count": 3,
          "avg_response_time_ms": 0.0,
          "max_response_time_ms": 0,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/purchase-orders-health",
          "request_count": 3,
          "avg_response_time_ms": 0.0,
          "max_response_time_ms": 0,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/warehouse_locations",
          "request_count": 2,
          "avg_response_time_ms": 16.0,
          "max_response_time_ms": 22,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/warehouse-locations-health",
          "request_count": 1,
          "avg_response_time_ms": 1.0,
          "max_response_time_ms": 1,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/art-orders-health",
          "request_count": 1,
          "avg_response_time_ms": 1.0,
          "max_response_time_ms": 1,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/monitoring/system-status",
          "request_count": 1,
          "avg_response_time_ms": 19.0,
          "max_response_time_ms": 19,
          "error_count": 0,
          "error_rate_percent": 0.0
        }
      ]
    },
    "recent_errors": {
      "recent_errors": [
        {
          "timestamp": "2025-06-06T01:00:09",
          "endpoint": "/api/v1/ro_item_picked",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "65be93ac-eee5-4dd2-aefd-0420d9e96701",
          "response_time_ms": 1
        },
        {
          "timestamp": "2025-06-06T01:00:09",
          "endpoint": "/api/v1/ro_item_picked",
          "method": "POST",
          "status_code": 404,
          "error_message": null,
          "request_id": "d331d470-8047-4dc2-a6cf-cd7ed6ff0779",
          "response_time_ms": 3
        },
        {
          "timestamp": "2025-06-06T01:00:09",
          "endpoint": "/api/v1/ro_item_picked",
          "method": "POST",
          "status_code": 404,
          "error_message": null,
          "request_id": "fb5ab768-16f9-4707-a5e1-345eddbfd6fd",
          "response_time_ms": 3
        },
        {
          "timestamp": "2025-06-06T01:00:08",
          "endpoint": "/api/v1/ro_item_picked",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "ea1ec5f8-cf44-47d0-b4eb-3ef367ba831b",
          "response_time_ms": 1
        },
        {
          "timestamp": "2025-06-06T01:00:08",
          "endpoint": "/api/v1/ro_item_picked",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "6143c104-df50-40a0-84d4-30c79cc962c1",
          "response_time_ms": 2
        }
      ]
    }
  },
  "health_issues": [
    "High error rate: 37.50%"
  ]
}[0m

[94m======== Testing: Replenishment API Health Check ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "healthy",
  "message": "Replenishment API endpoints are available",
  "timestamp": "2025-06-06T01:00:09.801114"
}[0m

[94m======== Testing: Cancel Invalid Order ID ========[0m
[92mâœ“ PASS: Request failed as expected with status 404[0m
[93m{
  "detail": {
    "status": "error",
    "message": "Replenishment order NONEXISTENT-RO not found in the system",
    "timestamp": "2025-06-06T01:00:09.811463",
    "error_code": "RO_NOT_FOUND"
  }
}[0m

[94m======== Testing: Cancel with Empty Order ID ========[0m
[92mâœ“ PASS: Request failed as expected with status 422[0m
[93m{
  "detail": [
    {
      "type": "value_error",
      "loc": [
        "body",
        "ro_id"
      ],
      "msg": "Value error, Replenishment Order ID cannot be empty",
      "input": "",
      "ctx": {
        "error": {
          "error_code": "RO_ID_EMPTY"
        }
      }
    }
  ]
}[0m

[94m======== Testing: Cancel Unassigned Order ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Found 2 active replenishment orders",
  "orders": [
    {
      "ro_id": "RO-2025041102",
      "ro_date_created": "2025-04-09T23:07:44",
      "ro_status": "In Process",
      "destination": "Bulk Order Workstation",
      "skus_in_order": 5
    },
    {
      "ro_id": "RO-2025041101",
      "ro_date_created": "2025-04-08T23:07:44",
      "ro_status": "In Process",
      "destination": "Staging",
      "skus_in_order": 3
    }
  ],
  "count": 2,
  "timestamp": "2025-06-06T01:00:09.827130"
}[0m
[91mâœ— FAIL: No 'Unassigned' orders found for testing[0m

[94m======== Testing: Cancel Valid In Process Order ========[0m

[94m======== Testing: Finding an In Process order ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Found 2 active replenishment orders",
  "orders": [
    {
      "ro_id": "RO-2025041102",
      "ro_date_created": "2025-04-09T23:07:44",
      "ro_status": "In Process",
      "destination": "Bulk Order Workstation",
      "skus_in_order": 5
    },
    {
      "ro_id": "RO-2025041101",
      "ro_date_created": "2025-04-08T23:07:44",
      "ro_status": "In Process",
      "destination": "Staging",
      "skus_in_order": 3
    }
  ],
  "count": 2,
  "timestamp": "2025-06-06T01:00:09.835793"
}[0m
[92mâœ“ PASS: Found In Process order: RO-2025041102[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Replenishment order RO-2025041102 has been reset to Unassigned status",
  "ro_id": "RO-2025041102",
  "previous_status": "In Process",
  "new_status": "Unassigned",
  "timestamp": "2025-06-06T01:00:09.848918"
}[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Successfully retrieved replenishment order RO-2025041102. Status changed from Unassigned to In Process",
  "order": {
    "ro_id": "RO-2025041102",
    "ro_date_created": "2025-04-09T23:07:44",
    "ro_status": "In Process",
    "destination": "Bulk Order Workstation",
    "items": [
      {
        "id": 10,
        "sku": "085715801715",
        "description": "Dunhill Desire Black M 100ml Boxed",
        "qty": 30,
        "qty_picked": 0,
        "created_at": "2025-04-09T23:12:02",
        "rack_location": "123-456-789"
      },
      {
        "id": 11,
        "sku": "085715808509",
        "description": "Set - Dunhill Icon Elite M 100ml Set (w/ 90ml SG)",
        "qty": 12,
        "qty_picked": 0,
        "created_at": "2025-04-09T23:12:02",
        "rack_location": "123-456-789"
      },
      {
        "id": 12,
        "sku": "085805004651",
        "description": "Elizabeth Arden Provocative W 30ml Boxed",
        "qty": 45,
        "qty_picked": 0,
        "created_at": "2025-04-09T23:12:02",
        "rack_location": "123-456-789"
      },
      {
        "id": 13,
        "sku": "212ACQM-100B",
        "description": "Carolina Herrera '212' Aqua Man 100ml Boxed",
        "qty": 8,
        "qty_picked": 0,
        "created_at": "2025-04-09T23:12:02",
        "rack_location": "123-456-789"
      },
      {
        "id": 14,
        "sku": "212DAW-60B",
        "description": "Vintage-Carolina Herrera '212' W 60ml Boxed Vintage",
        "qty": 5,
        "qty_picked": 0,
        "created_at": "2025-04-09T23:12:02",
        "rack_location": "123-456-789"
      }
    ],
    "item_count": 5
  },
  "status_changed": true,
  "timestamp": "2025-06-06T01:00:09.861552"
}[0m
[92mâœ“ PASS: Order RO-2025041102 was cancelled and then automatically changed to In Process during retrieval as expected[0m
[92mâœ“ PASS: All qty_picked values reset to 0[0m

[94m================= TEST SUMMARY =================[0m
API health check: âœ“
Cancel with invalid order ID: âœ“
Cancel with empty order ID: âœ“
Cancel Unassigned order (should fail): âœ—
Cancel valid In Process order: âœ“
[91mâœ— Some tests failed. Check the details above.[0m
Testing Products APIs...

Running test_product_search.py...
[94m================= TESTING PRODUCT SEARCH API WITH IMAGES =================[0m

[94m======== Testing: API Health Check ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "degraded",
  "message": "API is running and database is connected",
  "database": "connected",
  "timestamp": "2025-06-06T01:00:10.105390",
  "monitoring": {
    "error_rates_1h": {
      "total_requests": 112,
      "error_count": 41,
      "server_error_count": 1,
      "client_error_count": 40,
      "error_rate_percent": 36.61,
      "avg_response_time_ms": 12.6,
      "max_response_time_ms": 152
    },
    "endpoint_performance_24h": {
      "endpoints": [
        {
          "endpoint": "/api/v1/ro_item_picked",
          "request_count": 17,
          "avg_response_time_ms": 2.94,
          "max_response_time_ms": 10,
          "error_count": 13,
          "error_rate_percent": 76.47
        },
        {
          "endpoint": "/api/v1/art_order",
          "request_count": 17,
          "avg_response_time_ms": 9.41,
          "max_response_time_ms": 28,
          "error_count": 7,
          "error_rate_percent": 41.18
        },
        {
          "endpoint": "/api/v1/health",
          "request_count": 12,
          "avg_response_time_ms": 32.42,
          "max_response_time_ms": 152,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/ro_get_orders",
          "request_count": 10,
          "avg_response_time_ms": 3.4,
          "max_response_time_ms": 6,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/find_purchase_order",
          "request_count": 8,
          "avg_response_time_ms": 14.12,
          "max_response_time_ms": 56,
          "error_count": 2,
          "error_rate_percent": 25.0
        },
        {
          "endpoint": "/api/v1/bulkStorage",
          "request_count": 6,
          "avg_response_time_ms": 40.67,
          "max_response_time_ms": 70,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/putawayOrder",
          "request_count": 6,
          "avg_response_time_ms": 43.33,
          "max_response_time_ms": 126,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/update_po_status",
          "request_count": 6,
          "avg_response_time_ms": 3.0,
          "max_response_time_ms": 6,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/ro_retrieve_order",
          "request_count": 6,
          "avg_response_time_ms": 6.33,
          "max_response_time_ms": 8,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/ro_complete",
          "request_count": 5,
          "avg_response_time_ms": 5.4,
          "max_response_time_ms": 8,
          "error_count": 2,
          "error_rate_percent": 40.0
        },
        {
          "endpoint": "/api/v1/replenishment-health",
          "request_count": 4,
          "avg_response_time_ms": 0.0,
          "max_response_time_ms": 0,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/get_purchase_order",
          "request_count": 4,
          "avg_response_time_ms": 4.0,
          "max_response_time_ms": 10,
          "error_count": 3,
          "error_rate_percent": 75.0
        },
        {
          "endpoint": "/api/v1/ro_pick_cancelled",
          "request_count": 3,
          "avg_response_time_ms": 3.0,
          "max_response_time_ms": 5,
          "error_count": 2,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/purchase-orders-health",
          "request_count": 3,
          "avg_response_time_ms": 0.0,
          "max_response_time_ms": 0,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/warehouse_locations",
          "request_count": 2,
          "avg_response_time_ms": 16.0,
          "max_response_time_ms": 22,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/warehouse-locations-health",
          "request_count": 1,
          "avg_response_time_ms": 1.0,
          "max_response_time_ms": 1,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/art-orders-health",
          "request_count": 1,
          "avg_response_time_ms": 1.0,
          "max_response_time_ms": 1,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/monitoring/system-status",
          "request_count": 1,
          "avg_response_time_ms": 19.0,
          "max_response_time_ms": 19,
          "error_count": 0,
          "error_rate_percent": 0.0
        }
      ]
    },
    "recent_errors": {
      "recent_errors": [
        {
          "timestamp": "2025-06-06T01:00:09",
          "endpoint": "/api/v1/ro_pick_cancelled",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "d888796a-0339-4f07-8c6d-f3dbe086a999",
          "response_time_ms": 1
        },
        {
          "timestamp": "2025-06-06T01:00:09",
          "endpoint": "/api/v1/ro_pick_cancelled",
          "method": "POST",
          "status_code": 404,
          "error_message": null,
          "request_id": "df667f8d-7a49-4e9e-bcc9-29f43793d463",
          "response_time_ms": 3
        },
        {
          "timestamp": "2025-06-06T01:00:09",
          "endpoint": "/api/v1/ro_item_picked",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "65be93ac-eee5-4dd2-aefd-0420d9e96701",
          "response_time_ms": 1
        },
        {
          "timestamp": "2025-06-06T01:00:09",
          "endpoint": "/api/v1/ro_item_picked",
          "method": "POST",
          "status_code": 404,
          "error_message": null,
          "request_id": "d331d470-8047-4dc2-a6cf-cd7ed6ff0779",
          "response_time_ms": 3
        },
        {
          "timestamp": "2025-06-06T01:00:09",
          "endpoint": "/api/v1/ro_item_picked",
          "method": "POST",
          "status_code": 404,
          "error_message": null,
          "request_id": "fb5ab768-16f9-4707-a5e1-345eddbfd6fd",
          "response_time_ms": 3
        }
      ]
    }
  },
  "health_issues": [
    "High error rate: 36.61%"
  ]
}[0m

[94m======== Testing: Product API Health Check ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "healthy",
  "message": "Product search API endpoint is available",
  "timestamp": "2025-06-06T01:00:10.116392"
}[0m

[94m======== Testing: Basic Product Search ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Found 5 products matching the search criteria",
  "search_criteria": {
    "query": "Kolnisch",
    "limit": 5
  },
  "count": 5,
  "products": [
    {
      "sku": "4711M-100B",
      "name": "4711 By Echt Kolnisch Wasser 100ml Splash Boxed",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2016-11-08T03:50:34.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    },
    {
      "sku": "4711M-150B",
      "name": "4711 By Echt Kolnisch Wasser 150ml Splash Boxed",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2016-11-08T03:49:54.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    },
    {
      "sku": "4711M-200B",
      "name": "Jumbo - 4711 By Echt Kolnisch Wasser 200ml Boxed",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2016-11-08T03:49:54.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    },
    {
      "sku": "4711M-300B",
      "name": "Jumbo - 4711 By Echt Kolnisch Wasser M 300ml Boxed",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2016-11-08T03:49:55.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    },
    {
      "sku": "4711M-400B",
      "name": "4711 By Echt Kolnisch Wasser 400ml Boxed",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2016-11-08T03:49:55.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    }
  ],
  "timestamp": "2025-06-06T01:00:10.136364"
}[0m
[92mâœ“ PASS: Found 5 products[0m
[92mâœ“ PASS: All required response fields are present[0m
[92mâœ“ PASS: Products have required fields (sku, name)[0m

[94m======== Testing: Image URL Presence ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Found 10 products matching the search criteria",
  "search_criteria": {
    "query": "4711M",
    "limit": 10
  },
  "count": 10,
  "products": [
    {
      "sku": "4711M-100B",
      "name": "4711 By Echt Kolnisch Wasser 100ml Splash Boxed",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2016-11-08T03:50:34.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    },
    {
      "sku": "4711M-150B",
      "name": "4711 By Echt Kolnisch Wasser 150ml Splash Boxed",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2016-11-08T03:49:54.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    },
    {
      "sku": "4711M-200B",
      "name": "Jumbo - 4711 By Echt Kolnisch Wasser 200ml Boxed",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2016-11-08T03:49:54.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    },
    {
      "sku": "4711M-300B",
      "name": "Jumbo - 4711 By Echt Kolnisch Wasser M 300ml Boxed",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2016-11-08T03:49:55.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    },
    {
      "sku": "4711M-400B",
      "name": "4711 By Echt Kolnisch Wasser 400ml Boxed",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2016-11-08T03:49:55.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    },
    {
      "sku": "4711M-50B",
      "name": "4711 By Echt Kolnisch Wasser 50ml Splash Boxed",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2017-02-21T16:52:55.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    },
    {
      "sku": "4711M-60B",
      "name": "4711 By Echt Kolnisch Wasser 60ml Spray Boxed",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2016-11-08T03:49:55.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    },
    {
      "sku": "4711M-60T",
      "name": "Tester - 4711 By Echt Kolnisch Wasser 60ml Spray Tester",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2016-11-08T03:49:55.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    },
    {
      "sku": "4711M-800B",
      "name": "Jumbo - 4711 By Echt Kolnisch Wasser M 800ml Boxed",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2016-11-08T03:49:55.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    },
    {
      "sku": "4711M-90B",
      "name": "4711 By Echt Kolnisch Wasser M 90ml Spray Boxed",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2016-11-08T03:49:55.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    }
  ],
  "timestamp": "2025-06-06T01:00:10.153403"
}[0m
[92mâœ“ PASS: 10 out of 10 products have image_url[0m
Traceback (most recent call last):
  File "/root/api/tests/test_product_search.py", line 255, in <module>
    "image_url_presence": test_image_url_presence()[0],
                          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/api/tests/test_product_search.py", line 134, in test_image_url_presence
    if product["image_url"] != "NA" and not url_pattern.match(product["image_url"]):
                                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: expected string or bytes-like object, got 'NoneType'
Running barcode_lookup_test.py...
Python path: /usr/bin/python3
Python version: 3.11.2 (main, Apr 28 2025, 14:11:48) [GCC 12.2.0]
[94m================= TESTING BARCODE API WITH SPECIFIC PRODUCT =================[0m
[94mSKU: 4711M-50B[0m
[94mExpected Product Name: 4711 By Echt Kolnisch Wasser 50ml Splash Boxed[0m

[94m======== Testing: Barcode API Health Check ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "healthy",
  "message": "Barcode API endpoints are available",
  "timestamp": "2025-06-06T01:00:10.416216"
}[0m

[94m======== Testing: Barcode Lookup with Product Name: 4711 By Echt Kolnisch Wasser 50ml Splash Boxed ========[0m
Setting up test: Adding barcode 7237162992181 for SKU 4711M-50B
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Barcode 7237162992181 added successfully for SKU 4711M-50B",
  "sku": "4711M-50B",
  "barcode": "7237162992181",
  "alternate": 10,
  "timestamp": "2025-06-06T01:00:10.453864"
}[0m
[92mâœ“ PASS: Barcode added successfully[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "barcode": "7237162992181",
  "sku": "4711M-50B",
  "name": "4711 By Echt Kolnisch Wasser 50ml Splash Boxed",
  "alternate": 10,
  "timestamp": "2025-06-06T01:00:10.480303"
}[0m
[92mâœ“ PASS: Lookup response is successful[0m
[92mâœ“ PASS: SKU is correct: 4711M-50B[0m
[92mâœ“ PASS: Barcode is correct: 7237162992181[0m

[94m======== Testing: Looking up any existing barcodes for this SKU ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Barcode 139218518 added successfully for SKU 4711M-50B",
  "sku": "4711M-50B",
  "barcode": "139218518",
  "alternate": 10,
  "timestamp": "2025-06-06T01:00:10.515868"
}[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "barcode": "139218518",
  "sku": "4711M-50B",
  "name": "4711 By Echt Kolnisch Wasser 50ml Splash Boxed",
  "alternate": 10,
  "timestamp": "2025-06-06T01:00:10.540277"
}[0m
[92mâœ“ PASS: Found existing barcode with correct SKU[0m

[94m======== Testing: Add NA Barcode for Valid SKU ========[0m
[91mâœ— FAIL: Expected success but got status 400[0m
[93m{
  "detail": {
    "status": "error",
    "message": "Barcode NA already exists in the system for SKU 022548407455",
    "error_code": "DUPLICATE_BARCODE",
    "timestamp": "2025-06-06T01:00:10.790344"
  }
}[0m

[94m======== Testing: Add NA Barcode for Invalid SKU ========[0m
[92mâœ“ PASS: Request failed as expected with status 400[0m
[93m{
  "detail": {
    "status": "error",
    "message": "Barcode NA already exists in the system for SKU 022548407455",
    "error_code": "DUPLICATE_BARCODE",
    "timestamp": "2025-06-06T01:00:10.820006"
  }
}[0m

[94m======== Testing: Lookup NA Barcode ========[0m
[91mâœ— FAIL: Expected failure but request succeeded[0m
[93m{
  "status": "success",
  "barcode": "NA",
  "sku": "022548407455",
  "name": "Decant - Tory Burch W 7.5ml Unboxed Spray",
  "alternate": 10,
  "timestamp": "2025-06-06T01:00:10.843280"
}[0m

[94m================= TEST SUMMARY =================[0m
Tests passed: 3/5
[91mâœ— Some tests failed. Check the details above.[0m

[94m================= IMPORTANT NOTES =================[0m
[93mIf any tests failed, check the following:[0m
1. Confirm that SKU 4711M-50B exists in the products table
2. Confirm that the name in the database exactly matches: 4711 By Echt Kolnisch Wasser 50ml Splash Boxed
3. Verify the Barcode API endpoints are functioning correctly
4. Check that the database connection is working correctly
Testing Core APIs...

Running test_check_sku_api.py...
[94m================= TESTING CHECK SKU AGAINST PO API =================[0m

[94m======== Testing: API Health Check ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "degraded",
  "message": "API is running and database is connected",
  "database": "connected",
  "timestamp": "2025-06-06T01:00:11.183128",
  "monitoring": {
    "error_rates_1h": {
      "total_requests": 124,
      "error_count": 43,
      "server_error_count": 1,
      "client_error_count": 42,
      "error_rate_percent": 34.68,
      "avg_response_time_ms": 12.76,
      "max_response_time_ms": 152
    },
    "endpoint_performance_24h": {
      "endpoints": [
        {
          "endpoint": "/api/v1/art_order",
          "request_count": 17,
          "avg_response_time_ms": 9.41,
          "max_response_time_ms": 28,
          "error_count": 7,
          "error_rate_percent": 41.18
        },
        {
          "endpoint": "/api/v1/ro_item_picked",
          "request_count": 17,
          "avg_response_time_ms": 2.94,
          "max_response_time_ms": 10,
          "error_count": 13,
          "error_rate_percent": 76.47
        },
        {
          "endpoint": "/api/v1/health",
          "request_count": 13,
          "avg_response_time_ms": 30.62,
          "max_response_time_ms": 152,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/ro_get_orders",
          "request_count": 10,
          "avg_response_time_ms": 3.4,
          "max_response_time_ms": 6,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/find_purchase_order",
          "request_count": 8,
          "avg_response_time_ms": 14.12,
          "max_response_time_ms": 56,
          "error_count": 2,
          "error_rate_percent": 25.0
        },
        {
          "endpoint": "/api/v1/putawayOrder",
          "request_count": 6,
          "avg_response_time_ms": 43.33,
          "max_response_time_ms": 126,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/update_po_status",
          "request_count": 6,
          "avg_response_time_ms": 3.0,
          "max_response_time_ms": 6,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/bulkStorage",
          "request_count": 6,
          "avg_response_time_ms": 40.67,
          "max_response_time_ms": 70,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/ro_retrieve_order",
          "request_count": 6,
          "avg_response_time_ms": 6.33,
          "max_response_time_ms": 8,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/ro_complete",
          "request_count": 5,
          "avg_response_time_ms": 5.4,
          "max_response_time_ms": 8,
          "error_count": 2,
          "error_rate_percent": 40.0
        },
        {
          "endpoint": "/api/v1/addNewBarcode",
          "request_count": 4,
          "avg_response_time_ms": 22.25,
          "max_response_time_ms": 30,
          "error_count": 2,
          "error_rate_percent": 50.0
        },
        {
          "endpoint": "/api/v1/get_purchase_order",
          "request_count": 4,
          "avg_response_time_ms": 4.0,
          "max_response_time_ms": 10,
          "error_count": 3,
          "error_rate_percent": 75.0
        },
        {
          "endpoint": "/api/v1/replenishment-health",
          "request_count": 4,
          "avg_response_time_ms": 0.0,
          "max_response_time_ms": 0,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/purchase-orders-health",
          "request_count": 3,
          "avg_response_time_ms": 0.0,
          "max_response_time_ms": 0,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/barcodeLookup",
          "request_count": 3,
          "avg_response_time_ms": 17.0,
          "max_response_time_ms": 19,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/ro_pick_cancelled",
          "request_count": 3,
          "avg_response_time_ms": 3.0,
          "max_response_time_ms": 5,
          "error_count": 2,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/warehouse_locations",
          "request_count": 2,
          "avg_response_time_ms": 16.0,
          "max_response_time_ms": 22,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/product_search",
          "request_count": 2,
          "avg_response_time_ms": 11.0,
          "max_response_time_ms": 12,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/monitoring/system-status",
          "request_count": 1,
          "avg_response_time_ms": 19.0,
          "max_response_time_ms": 19,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/art-orders-health",
          "request_count": 1,
          "avg_response_time_ms": 1.0,
          "max_response_time_ms": 1,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/warehouse-locations-health",
          "request_count": 1,
          "avg_response_time_ms": 1.0,
          "max_response_time_ms": 1,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/barcode-health",
          "request_count": 1,
          "avg_response_time_ms": 0.0,
          "max_response_time_ms": 0,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/product-health",
          "request_count": 1,
          "avg_response_time_ms": 0.0,
          "max_response_time_ms": 0,
          "error_count": 0,
          "error_rate_percent": 0.0
        }
      ]
    },
    "recent_errors": {
      "recent_errors": [
        {
          "timestamp": "2025-06-06T01:00:10",
          "endpoint": "/api/v1/addNewBarcode",
          "method": "POST",
          "status_code": 400,
          "error_message": null,
          "request_id": "6ce6287e-540a-49ed-a40e-600999779282",
          "response_time_ms": 16
        },
        {
          "timestamp": "2025-06-06T01:00:10",
          "endpoint": "/api/v1/addNewBarcode",
          "method": "POST",
          "status_code": 400,
          "error_message": null,
          "request_id": "68f9de2d-6163-45b3-bc1d-d958d7f22a9b",
          "response_time_ms": 15
        },
        {
          "timestamp": "2025-06-06T01:00:09",
          "endpoint": "/api/v1/ro_pick_cancelled",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "d888796a-0339-4f07-8c6d-f3dbe086a999",
          "response_time_ms": 1
        },
        {
          "timestamp": "2025-06-06T01:00:09",
          "endpoint": "/api/v1/ro_pick_cancelled",
          "method": "POST",
          "status_code": 404,
          "error_message": null,
          "request_id": "df667f8d-7a49-4e9e-bcc9-29f43793d463",
          "response_time_ms": 3
        },
        {
          "timestamp": "2025-06-06T01:00:09",
          "endpoint": "/api/v1/ro_item_picked",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "65be93ac-eee5-4dd2-aefd-0420d9e96701",
          "response_time_ms": 1
        }
      ]
    }
  },
  "health_issues": [
    "High error rate: 34.68%"
  ]
}[0m

[94m======== Testing: Purchase Orders API Health Check ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "healthy",
  "message": "Purchase Order API endpoints are available",
  "timestamp": "2025-06-06T01:00:11.191782"
}[0m

[94m======== Testing: Check SKU In PO (Should return True) ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "result": true,
  "po_number": "PO-TEST-001",
  "barcode": "1234567890123",
  "sku": "4711M-50B",
  "timestamp": "2025-06-06T01:00:11.215265"
}[0m
[92mâœ“ PASS: API returned TRUE as expected[0m

[94m======== Testing: Check SKU Not In PO (Should return False) ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "result": false,
  "po_number": "PO-TEST-003",
  "barcode": "1234567890123",
  "sku": "4711M-50B",
  "timestamp": "2025-06-06T01:00:11.236717"
}[0m
[92mâœ“ PASS: API returned FALSE as expected[0m

[94m======== Testing: Check SKU with Non-existent Barcode ========[0m
[92mâœ“ PASS: Request failed as expected with status 404[0m
[93m{
  "detail": {
    "status": "error",
    "message": "Barcode 9999999999999 not found in the system",
    "timestamp": "2025-06-06T01:00:11.255490",
    "error_code": "BARCODE_NOT_FOUND"
  }
}[0m

[94m======== Testing: Missing PO Number ========[0m
[92mâœ“ PASS: Request failed as expected with status 422[0m
[93m{
  "detail": [
    {
      "type": "missing",
      "loc": [
        "body",
        "po_number"
      ],
      "msg": "Field required",
      "input": {
        "barcode": "1234567890123"
      }
    }
  ]
}[0m

[94m======== Testing: Missing Barcode ========[0m
[92mâœ“ PASS: Request failed as expected with status 422[0m
[93m{
  "detail": [
    {
      "type": "missing",
      "loc": [
        "body",
        "barcode"
      ],
      "msg": "Field required",
      "input": {
        "po_number": "PO-TEST-001"
      }
    }
  ]
}[0m

[94m======== Testing: Invalid Barcode Format ========[0m
[92mâœ“ PASS: Request failed as expected with status 422[0m
[93m{
  "detail": [
    {
      "type": "value_error",
      "loc": [
        "body",
        "barcode"
      ],
      "msg": "Value error, Barcode must be between 8 and 14 digits or \"NA\" for not available",
      "input": "123",
      "ctx": {
        "error": {
          "error_code": "BARCODE_INVALID_FORMAT"
        }
      }
    }
  ]
}[0m

[94m================= TEST SUMMARY =================[0m
Tests passed: 6/6
[92mâœ“ All tests passed! Check SKU Against PO API is working.[0m
Running test_unified_search.py...
[94m================= TESTING UNIFIED PRODUCT SEARCH API =================[0m

[94m======== Testing: API Health Check ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "degraded",
  "message": "API is running and database is connected",
  "database": "connected",
  "timestamp": "2025-06-06T01:00:11.504256",
  "monitoring": {
    "error_rates_1h": {
      "total_requests": 132,
      "error_count": 47,
      "server_error_count": 1,
      "client_error_count": 46,
      "error_rate_percent": 35.61,
      "avg_response_time_ms": 12.39,
      "max_response_time_ms": 152
    },
    "endpoint_performance_24h": {
      "endpoints": [
        {
          "endpoint": "/api/v1/art_order",
          "request_count": 17,
          "avg_response_time_ms": 9.41,
          "max_response_time_ms": 28,
          "error_count": 7,
          "error_rate_percent": 41.18
        },
        {
          "endpoint": "/api/v1/ro_item_picked",
          "request_count": 17,
          "avg_response_time_ms": 2.94,
          "max_response_time_ms": 10,
          "error_count": 13,
          "error_rate_percent": 76.47
        },
        {
          "endpoint": "/api/v1/health",
          "request_count": 14,
          "avg_response_time_ms": 29.0,
          "max_response_time_ms": 152,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/ro_get_orders",
          "request_count": 10,
          "avg_response_time_ms": 3.4,
          "max_response_time_ms": 6,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/find_purchase_order",
          "request_count": 8,
          "avg_response_time_ms": 14.12,
          "max_response_time_ms": 56,
          "error_count": 2,
          "error_rate_percent": 25.0
        },
        {
          "endpoint": "/api/v1/ro_retrieve_order",
          "request_count": 6,
          "avg_response_time_ms": 6.33,
          "max_response_time_ms": 8,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/bulkStorage",
          "request_count": 6,
          "avg_response_time_ms": 40.67,
          "max_response_time_ms": 70,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/putawayOrder",
          "request_count": 6,
          "avg_response_time_ms": 43.33,
          "max_response_time_ms": 126,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/update_po_status",
          "request_count": 6,
          "avg_response_time_ms": 3.0,
          "max_response_time_ms": 6,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/check_sku_against_po",
          "request_count": 6,
          "avg_response_time_ms": 7.67,
          "max_response_time_ms": 17,
          "error_count": 4,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/ro_complete",
          "request_count": 5,
          "avg_response_time_ms": 5.4,
          "max_response_time_ms": 8,
          "error_count": 2,
          "error_rate_percent": 40.0
        },
        {
          "endpoint": "/api/v1/purchase-orders-health",
          "request_count": 4,
          "avg_response_time_ms": 0.0,
          "max_response_time_ms": 0,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/get_purchase_order",
          "request_count": 4,
          "avg_response_time_ms": 4.0,
          "max_response_time_ms": 10,
          "error_count": 3,
          "error_rate_percent": 75.0
        },
        {
          "endpoint": "/api/v1/replenishment-health",
          "request_count": 4,
          "avg_response_time_ms": 0.0,
          "max_response_time_ms": 0,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/addNewBarcode",
          "request_count": 4,
          "avg_response_time_ms": 22.25,
          "max_response_time_ms": 30,
          "error_count": 2,
          "error_rate_percent": 50.0
        },
        {
          "endpoint": "/api/v1/ro_pick_cancelled",
          "request_count": 3,
          "avg_response_time_ms": 3.0,
          "max_response_time_ms": 5,
          "error_count": 2,
          "error_rate_percent": 66.67
        },
        {
          "endpoint": "/api/v1/barcodeLookup",
          "request_count": 3,
          "avg_response_time_ms": 17.0,
          "max_response_time_ms": 19,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/warehouse_locations",
          "request_count": 2,
          "avg_response_time_ms": 16.0,
          "max_response_time_ms": 22,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/product_search",
          "request_count": 2,
          "avg_response_time_ms": 11.0,
          "max_response_time_ms": 12,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/art-orders-health",
          "request_count": 1,
          "avg_response_time_ms": 1.0,
          "max_response_time_ms": 1,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/warehouse-locations-health",
          "request_count": 1,
          "avg_response_time_ms": 1.0,
          "max_response_time_ms": 1,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/product-health",
          "request_count": 1,
          "avg_response_time_ms": 0.0,
          "max_response_time_ms": 0,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/barcode-health",
          "request_count": 1,
          "avg_response_time_ms": 0.0,
          "max_response_time_ms": 0,
          "error_count": 0,
          "error_rate_percent": 0.0
        },
        {
          "endpoint": "/api/v1/monitoring/system-status",
          "request_count": 1,
          "avg_response_time_ms": 19.0,
          "max_response_time_ms": 19,
          "error_count": 0,
          "error_rate_percent": 0.0
        }
      ]
    },
    "recent_errors": {
      "recent_errors": [
        {
          "timestamp": "2025-06-06T01:00:11",
          "endpoint": "/api/v1/check_sku_against_po",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "56eba407-b4fe-44e0-a6fe-39c634573852",
          "response_time_ms": 1
        },
        {
          "timestamp": "2025-06-06T01:00:11",
          "endpoint": "/api/v1/check_sku_against_po",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "fc09bfa1-878b-4a02-90ac-a394dda3785a",
          "response_time_ms": 0
        },
        {
          "timestamp": "2025-06-06T01:00:11",
          "endpoint": "/api/v1/check_sku_against_po",
          "method": "POST",
          "status_code": 422,
          "error_message": null,
          "request_id": "8aafff05-38da-49f8-8aee-34c698ba0cfc",
          "response_time_ms": 0
        },
        {
          "timestamp": "2025-06-06T01:00:11",
          "endpoint": "/api/v1/check_sku_against_po",
          "method": "POST",
          "status_code": 404,
          "error_message": null,
          "request_id": "faef7d7b-e6df-4f15-8227-57d3a3ef05bf",
          "response_time_ms": 13
        },
        {
          "timestamp": "2025-06-06T01:00:10",
          "endpoint": "/api/v1/addNewBarcode",
          "method": "POST",
          "status_code": 400,
          "error_message": null,
          "request_id": "6ce6287e-540a-49ed-a40e-600999779282",
          "response_time_ms": 16
        }
      ]
    }
  },
  "health_issues": [
    "High error rate: 35.61%"
  ]
}[0m

[94m======== Testing: Search by SKU Pattern ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Found 5 products matching the search criteria",
  "search_criteria": {
    "query": "4711M",
    "limit": 5
  },
  "count": 5,
  "products": [
    {
      "sku": "4711M-100B",
      "name": "4711 By Echt Kolnisch Wasser 100ml Splash Boxed",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2016-11-08T03:50:34.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    },
    {
      "sku": "4711M-150B",
      "name": "4711 By Echt Kolnisch Wasser 150ml Splash Boxed",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2016-11-08T03:49:54.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    },
    {
      "sku": "4711M-200B",
      "name": "Jumbo - 4711 By Echt Kolnisch Wasser 200ml Boxed",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2016-11-08T03:49:54.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    },
    {
      "sku": "4711M-300B",
      "name": "Jumbo - 4711 By Echt Kolnisch Wasser M 300ml Boxed",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2016-11-08T03:49:55.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    },
    {
      "sku": "4711M-400B",
      "name": "4711 By Echt Kolnisch Wasser 400ml Boxed",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2016-11-08T03:49:55.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    }
  ],
  "timestamp": "2025-06-06T01:00:11.521009"
}[0m

[94m======== Testing: Search by Description ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Found 5 products matching the search criteria",
  "search_criteria": {
    "query": "Kolnisch",
    "limit": 5
  },
  "count": 5,
  "products": [
    {
      "sku": "4711M-100B",
      "name": "4711 By Echt Kolnisch Wasser 100ml Splash Boxed",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2016-11-08T03:50:34.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    },
    {
      "sku": "4711M-150B",
      "name": "4711 By Echt Kolnisch Wasser 150ml Splash Boxed",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2016-11-08T03:49:54.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    },
    {
      "sku": "4711M-200B",
      "name": "Jumbo - 4711 By Echt Kolnisch Wasser 200ml Boxed",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2016-11-08T03:49:54.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    },
    {
      "sku": "4711M-300B",
      "name": "Jumbo - 4711 By Echt Kolnisch Wasser M 300ml Boxed",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2016-11-08T03:49:55.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    },
    {
      "sku": "4711M-400B",
      "name": "4711 By Echt Kolnisch Wasser 400ml Boxed",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2016-11-08T03:49:55.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    }
  ],
  "timestamp": "2025-06-06T01:00:11.534825"
}[0m

[94m======== Testing: Search by Size (50ml) ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "Found 5 products matching the search criteria",
  "search_criteria": {
    "query": "50ml",
    "limit": 5
  },
  "count": 5,
  "products": [
    {
      "sku": "212M-50B",
      "name": "Carolina Herrera '212' M 50ml Spray Boxed",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2016-11-08T03:49:51.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    },
    {
      "sku": "212SM-50B",
      "name": "Carolina Herrera 212 Sexy M 50ml Boxed",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2016-11-08T03:49:51.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    },
    {
      "sku": "212SM-50T",
      "name": "Tester Carolina Herrera 212 Sexy M 50ml Boxed",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2019-01-26T21:32:20.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    },
    {
      "sku": "212SM2M-50S",
      "name": "Set - Carolina Herrera 212 Sexy M 50ml 2Pc Set",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2016-11-08T03:49:51.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    },
    {
      "sku": "212VM-50B",
      "name": "Carolina Herrera ''212 Vip'' M 50ml Boxed",
      "weight_value": "0.453",
      "length": "0.00",
      "width": "0.00",
      "height": "0.00",
      "dimension_unit": "cm",
      "weight_unit": "g",
      "created_date_utc": "2016-11-08T03:49:51.0000000Z",
      "pictures": "",
      "barcode": null,
      "image_url": null
    }
  ],
  "timestamp": "2025-06-06T01:00:11.548236"
}[0m

[94m======== Testing: Search for Non-Existent Product ========[0m
[92mâœ“ PASS: Request succeeded as expected[0m
[93m{
  "status": "success",
  "message": "No products found matching the search criteria",
  "search_criteria": {
    "query": "NonExistentProduct12345",
    "limit": 5
  },
  "count": 0,
  "products": [],
  "timestamp": "2025-06-06T01:00:11.648861"
}[0m

[94m======== Testing: Search with Empty Query ========[0m
[92mâœ“ PASS: Request failed as expected with status 422[0m
[93m{
  "detail": [
    {
      "type": "string_too_short",
      "loc": [
        "body",
        "query"
      ],
      "msg": "String should have at least 1 character",
      "input": "",
      "ctx": {
        "min_length": 1
      }
    }
  ]
}[0m

[94m================= TEST SUMMARY =================[0m
Tests passed: 5/5
[92mâœ“ All tests passed! Unified product search API is working.[0m
